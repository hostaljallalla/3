{"ast":null,"code":"import _objectSpread from\"C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import RoomList from'../components/RoomList';import roomsData from'../data/roomsData';import DatePicker,{registerLocale}from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import es from'date-fns/locale/es';import'../styles/Home.css';import Footer from'../components/Footer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";registerLocale(\"es\",es);const Home=()=>{const navigate=useNavigate();// Fechas iniciales\nconst today=new Date();const tomorrow=new Date(today.getTime()+24*60*60*1000);const[checkIn,setCheckIn]=useState(today);const[checkOut,setCheckOut]=useState(tomorrow);const[reservations,setReservations]=useState([]);const[availability,setAvailability]=useState({});const[selectedOptions,setSelectedOptions]=useState(roomsData.reduce((acc,room)=>_objectSpread(_objectSpread({},acc),{},{[room.id]:1}),{}));const sortedRoomsData=[...roomsData].sort((a,b)=>a.id-b.id);const fetchReservations=async()=>{try{const response=await fetch(\"https://hostaljallalla2.onrender.com/api/reservations\");const data=await response.json();setReservations(data);}catch(error){console.error(\"Error al obtener reservas:\",error);}};const calculateAvailability=()=>{const updatedAvailability={};sortedRoomsData.forEach(room=>{let isAvailable=true;reservations.forEach(res=>{const resCheckIn=new Date(res.checkIn).getTime();const resCheckOut=new Date(res.checkOut).getTime();const selectedCheckIn=checkIn.getTime();const selectedCheckOut=checkOut.getTime();if(room.id===res.roomId&&selectedCheckOut>resCheckIn&&selectedCheckIn<resCheckOut){isAvailable=false;}});updatedAvailability[room.id]=isAvailable;});setAvailability(updatedAvailability);};useEffect(()=>{fetchReservations();},[]);useEffect(()=>{if(reservations.length>0){calculateAvailability();}},[checkIn,checkOut,reservations]);const handleSelectChange=(id,value)=>{setSelectedOptions(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"home-title\",children:\"Bienvenido al Hostal Jallalla\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Elige una fecha\"}),/*#__PURE__*/_jsx(DatePicker,{selected:checkIn,onChange:date=>setCheckIn(date),locale:\"es\",minDate:today,dateFormat:\"dd/MM/yyyy\"}),/*#__PURE__*/_jsx(DatePicker,{selected:checkOut,onChange:date=>date>checkIn&&setCheckOut(date),locale:\"es\",minDate:new Date(checkIn.getTime()+24*60*60*1000),dateFormat:\"dd/MM/yyyy\",className:\"hidden-calendar\"})]}),/*#__PURE__*/_jsx(RoomList,{rooms:sortedRoomsData,availability:availability,selectedOptions:selectedOptions,handleSelectChange:handleSelectChange}),/*#__PURE__*/_jsx(Footer,{})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","RoomList","roomsData","DatePicker","registerLocale","es","Footer","jsx","_jsx","jsxs","_jsxs","Home","navigate","today","Date","tomorrow","getTime","checkIn","setCheckIn","checkOut","setCheckOut","reservations","setReservations","availability","setAvailability","selectedOptions","setSelectedOptions","reduce","acc","room","_objectSpread","id","sortedRoomsData","sort","a","b","fetchReservations","response","fetch","data","json","error","console","calculateAvailability","updatedAvailability","forEach","isAvailable","res","resCheckIn","resCheckOut","selectedCheckIn","selectedCheckOut","roomId","length","handleSelectChange","value","prev","className","children","selected","onChange","date","locale","minDate","dateFormat","rooms"],"sources":["C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport RoomList from '../components/RoomList';\r\nimport roomsData from '../data/roomsData';\r\nimport DatePicker, { registerLocale } from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport es from 'date-fns/locale/es';\r\nimport '../styles/Home.css';\r\nimport Footer from '../components/Footer';\r\n\r\n\r\nregisterLocale(\"es\", es);\r\n\r\nconst Home = () => {\r\n    const navigate = useNavigate();\r\n\r\n    // Fechas iniciales\r\n    const today = new Date();\r\n    const tomorrow = new Date(today.getTime() + 24 * 60 * 60 * 1000);\r\n\r\n    const [checkIn, setCheckIn] = useState(today);\r\n    const [checkOut, setCheckOut] = useState(tomorrow);\r\n    const [reservations, setReservations] = useState([]);\r\n    const [availability, setAvailability] = useState({});\r\n    const [selectedOptions, setSelectedOptions] = useState(\r\n        roomsData.reduce((acc, room) => ({ ...acc, [room.id]: 1 }), {})\r\n    );\r\n\r\n    const sortedRoomsData = [...roomsData].sort((a, b) => a.id - b.id);\r\n\r\n    const fetchReservations = async () => {\r\n        try {\r\n            const response = await fetch(\"https://hostaljallalla2.onrender.com/api/reservations\");\r\n            const data = await response.json();\r\n            setReservations(data);\r\n        } catch (error) {\r\n            console.error(\"Error al obtener reservas:\", error);\r\n        }\r\n    };\r\n\r\n    const calculateAvailability = () => {\r\n        const updatedAvailability = {};\r\n\r\n        sortedRoomsData.forEach((room) => {\r\n            let isAvailable = true;\r\n\r\n            reservations.forEach((res) => {\r\n                const resCheckIn = new Date(res.checkIn).getTime();\r\n                const resCheckOut = new Date(res.checkOut).getTime();\r\n                const selectedCheckIn = checkIn.getTime();\r\n                const selectedCheckOut = checkOut.getTime();\r\n\r\n                if (\r\n                    room.id === res.roomId &&\r\n                    selectedCheckOut > resCheckIn &&\r\n                    selectedCheckIn < resCheckOut\r\n                ) {\r\n                    isAvailable = false;\r\n                }\r\n            });\r\n\r\n            updatedAvailability[room.id] = isAvailable;\r\n        });\r\n\r\n        setAvailability(updatedAvailability);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchReservations();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (reservations.length > 0) {\r\n            calculateAvailability();\r\n        }\r\n    }, [checkIn, checkOut, reservations]);\r\n\r\n    const handleSelectChange = (id, value) => {\r\n        setSelectedOptions((prev) => ({ ...prev, [id]: value }));\r\n    };\r\n\r\n    return (\r\n        <div className=\"home-container\">\r\n            <h1 className=\"home-title\">Bienvenido al Hostal Jallalla</h1>\r\n\r\n            {/* Calendarios */}\r\n            <div className=\"calendar-container\">\r\n                <label>Elige una fecha</label>\r\n                <DatePicker\r\n                    selected={checkIn}\r\n                    onChange={(date) => setCheckIn(date)}\r\n                    locale=\"es\"\r\n                    minDate={today}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                />\r\n\r\n        \r\n                <DatePicker selected={checkOut}\r\n    onChange={(date) => date > checkIn && setCheckOut(date)}\r\n    locale=\"es\"\r\n    minDate={new Date(checkIn.getTime() + 24 * 60 * 60 * 1000)}\r\n    dateFormat=\"dd/MM/yyyy\"\r\n    className=\"hidden-calendar\"\r\n/>\r\n\r\n            </div>\r\n\r\n\r\n            {/* Lista de habitaciones */}\r\n            <RoomList\r\n                rooms={sortedRoomsData}\r\n                availability={availability}\r\n                selectedOptions={selectedOptions}\r\n                handleSelectChange={handleSelectChange}\r\n            />\r\n            <Footer />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}