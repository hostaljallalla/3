{"ast":null,"code":"import _objectSpread from\"C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import rooms from'../data/rooms';import Calendar from'react-calendar';import PaypalButton from'../PaypalButton';import{Carousel}from'react-responsive-carousel';import Lightbox from\"yet-another-react-lightbox\";import\"yet-another-react-lightbox/styles.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RoomDetails=()=>{// Tus estados originales\nconst[paypalKey,setPaypalKey]=useState(0);const[isLightboxOpen,setLightboxOpen]=useState(false);const[currentImageIndex,setCurrentImageIndex]=useState(0);const refreshPaypalButton=()=>setPaypalKey(prevKey=>prevKey+1);const confirmReservationRef=useRef(null);const{id}=useParams();const navigate=useNavigate();const room=rooms.find(room=>room.id===parseInt(id));const[selectedDate,setSelectedDate]=useState(null);const[checkOut,setCheckOut]=useState(null);const[isAvailable,setIsAvailable]=useState(false);const[selectedOption,setSelectedOption]=useState(1);const[showForm,setShowForm]=useState(false);const[error,setError]=useState('');const[showCheckInCalendar,setShowCheckInCalendar]=useState(false);const[showCheckOutCalendar,setShowCheckOutCalendar]=useState(false);const checkInRef=useRef(null);const checkOutRef=useRef(null);const[formData,setFormData]=useState({clientName:'',clientName2:'',clientEmail:'',rutOrPassport:'',phone:'',nationality:'',address:''});// --- CAMBIO 1: Se AÑADEN estas líneas para solucionar el \"Estado Rancio\" ---\nconst formDataRef=useRef(formData);useEffect(()=>{formDataRef.current=formData;},[formData]);// --- FIN DEL CAMBIO 1 ---\n// Tus useEffect originales no se modifican\nuseEffect(()=>{if(!isAvailable||!selectedDate||!checkOut){setShowForm(false);}},[isAvailable,selectedDate,checkOut]);useEffect(()=>{const handleClickOutside=event=>{const calendarElements=['.react-calendar','.react-calendar__navigation','.react-calendar__navigation__arrow','.react-calendar__tile','.react-calendar__month-view__days'];const isClickInsideCalendar=calendarElements.some(selector=>event.target.closest(selector));if(!isClickInsideCalendar){setShowCheckInCalendar(false);setShowCheckOutCalendar(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);useEffect(()=>{const checkAvailability=async()=>{if(selectedDate&&checkOut){if(selectedDate.toISOString().split('T')[0]===checkOut.toISOString().split('T')[0]){setError('La fecha de ingreso no puede ser igual a la de salida.');setIsAvailable(false);return;}try{var _data$unavailableRoom;const response=await fetch('https://three-2cs3.onrender.com/api/reservations/check-availability',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({checkIn:selectedDate.toISOString().split('T')[0],checkOut:checkOut.toISOString().split('T')[0],roomId:room.id})});const data=await response.json();setError('');setIsAvailable(!((_data$unavailableRoom=data.unavailableRooms)!==null&&_data$unavailableRoom!==void 0&&_data$unavailableRoom.includes(room.id)));}catch(error){console.error('Error al verificar disponibilidad:',error);setIsAvailable(false);}}};checkAvailability();},[selectedDate,checkOut,room.id]);// Tus funciones handler originales no se modifican\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleCheckInChange=date=>{setSelectedDate(date);setShowCheckInCalendar(false);if(!checkOut||date.getTime()>=checkOut.getTime()){const nextDay=new Date(date);nextDay.setDate(date.getDate()+1);setCheckOut(nextDay);}refreshPaypalButton();};const handleCheckOutChange=date=>{setCheckOut(date);setShowCheckOutCalendar(false);refreshPaypalButton();};// --- CAMBIO 2: Se REEMPLAZA esta función para que use los datos actualizados ---\nconst handlePaymentSuccess=async details=>{const currentFormData=formDataRef.current;// Lee los datos frescos de la \"caja\"\nconst{clientName,rutOrPassport,phone,nationality,address}=currentFormData;if(!clientName||!rutOrPassport||!phone||!nationality||!address){alert('Por favor, completa todos los campos del formulario para registrar la reserva pagada.');return;}const reservationData={roomId:room.id,clientName:currentFormData.clientName,clientName2:selectedOption===2?currentFormData.clientName2:undefined,clientEmail:currentFormData.clientEmail||undefined,rutOrPassport:currentFormData.rutOrPassport,numberOfGuests:selectedOption,checkIn:selectedDate===null||selectedDate===void 0?void 0:selectedDate.toISOString().split('T')[0],checkOut:checkOut===null||checkOut===void 0?void 0:checkOut.toISOString().split('T')[0],phone:currentFormData.phone,nationality:currentFormData.nationality,address:currentFormData.address,nights:calculateNights(),totalCost:calculateTotalPrice(),paymentMethod:'PayPal',paymentStatus:'pagado',transactionId:details.id};try{const response=await fetch('https://three-2cs3.onrender.com/api/reservations',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(reservationData)});if(response.ok){navigate('/success',{state:{reservation:reservationData}});}else{const result=await response.json();alert(\"El pago fue exitoso, pero hubo un error al guardar la reserva: \".concat(result.message));}}catch(error){console.error('Error al conectar con el servidor:',error);alert('El pago fue exitoso, pero hubo un error al conectar con el servidor para guardar la reserva.');}};// --- FIN DEL CAMBIO 2 ---\n// El resto de tus funciones no se modifican\nconst handleConfirmReservation=async e=>{e.preventDefault();const reservationData={roomId:room.id,clientName:formData.clientName,clientName2:selectedOption===2?formData.clientName2:undefined,clientEmail:formData.clientEmail||undefined,rutOrPassport:formData.rutOrPassport,numberOfGuests:selectedOption,checkIn:selectedDate===null||selectedDate===void 0?void 0:selectedDate.toISOString().split('T')[0],checkOut:checkOut===null||checkOut===void 0?void 0:checkOut.toISOString().split('T')[0],phone:formData.phone,nationality:formData.nationality,address:formData.address,nights:calculateNights(),totalCost:calculateTotalPrice(),paymentMethod:'En Hostal',paymentStatus:'pendiente'};console.log(\"Enviando al backend:\",reservationData);try{const response=await fetch('https://three-2cs3.onrender.com/api/reservations',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(reservationData)});if(response.ok){navigate('/success',{state:{reservation:reservationData}});}else{const result=await response.json();alert(\"Error al realizar la reserva: \".concat(result.message));}}catch(error){console.error('Error al conectar con el servidor:',error);alert('Hubo un error al conectar con el servidor.');}};const exchangeRate=900;const calculateNights=()=>{if(!selectedDate||!checkOut)return 0;return Math.ceil((checkOut-selectedDate)/(1000*60*60*24));};const convertToUSD=amountInCLP=>{return(amountInCLP/exchangeRate).toFixed(2);};const calculateTotalPrice=()=>{const nights=calculateNights();const pricePerNight=selectedOption===1?room.priceForOne:room.priceForTwo;return nights*pricePerNight;};const calculateTotalPriceInUSD=()=>{const totalInCLP=calculateTotalPrice();return convertToUSD(totalInCLP);};const roomImages=room.images&&Array.isArray(room.images)&&room.images.length>0?room.images:[room.image];const lightboxSlides=roomImages.map(imgSrc=>({src:imgSrc}));if(!room){return/*#__PURE__*/_jsx(\"div\",{children:\"Habitaci\\xF3n no encontrada\"});}// Tu JSX permanece exactamente igual\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{padding:'30px',textAlign:'center',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{display:'inline-block',padding:'10px 20px',fontSize:'15px',fontWeight:'bold',color:'white',backgroundColor:'#007bff',border:'2px solidrgb(255, 255, 255)',borderRadius:'20px',textAlign:'center',cursor:'default'},children:room.type}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",room.id]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',fontSize:'15px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Selecciona tus fechas\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{ref:checkInRef,style:{border:'1px solid #ccc',padding:'10px',borderRadius:'30px',cursor:'pointer',backgroundColor:'#f9f9f9',position:'relative'},onClick:()=>setShowCheckInCalendar(prev=>!prev),children:[\" \",selectedDate?selectedDate.toLocaleDateString('es-ES'):'Selecciona fecha de ingreso',\" \",showCheckInCalendar&&/*#__PURE__*/_jsx(\"div\",{className:\"react-calendar\",style:{position:'absolute',zIndex:10},onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsx(Calendar,{onClickDay:date=>{handleCheckInChange(date);setShowCheckInCalendar(false);},value:selectedDate,locale:\"es-ES\",minDate:new Date()})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{ref:checkOutRef,style:{border:'1px solid #ccc',padding:'10px',borderRadius:'20px',cursor:'pointer',backgroundColor:'#f9f9f9',position:'relative'},onClick:()=>setShowCheckOutCalendar(prev=>!prev),children:[\" \",checkOut?checkOut.toLocaleDateString('es-ES'):'Selecciona fecha de salida',\" \",showCheckOutCalendar&&/*#__PURE__*/_jsx(\"div\",{className:\"react-calendar\",style:{position:'absolute',zIndex:10},onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsx(Calendar,{onClickDay:date=>{handleCheckOutChange(date);setShowCheckOutCalendar(false);},value:checkOut,locale:\"es-ES\",minDate:selectedDate?new Date(selectedDate.getTime()+24*60*60*1000):new Date()})})]})}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',fontWeight:'bold'},children:error}),selectedDate&&checkOut&&!error&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'20px',fontSize:'18px',fontWeight:'bold',color:isAvailable?'#28a745':'#dc3545',textAlign:'center'},children:isAvailable?'¡Disponible!':'No disponible'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',gap:'30px',marginBottom:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,textAlign:'center'},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'0.8em',fontWeight:'bold'},children:\"Precio por Noche\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'0.7em'},children:selectedOption===1?\"\".concat(room.priceForOne,\" CLP\"):\"\".concat(room.priceForTwo,\" CLP\")}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontSize:'0.7em'},children:[\"($ \",selectedOption===1?convertToUSD(room.priceForOne):convertToUSD(room.priceForTwo),\" USD)\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,maxWidth:'250px',margin:'0 auto'},children:/*#__PURE__*/_jsx(Carousel,{showThumbs:false,infiniteLoop:true,autoPlay:true,interval:3000,showStatus:false,onClickItem:index=>{setCurrentImageIndex(index);setLightboxOpen(true);},children:roomImages.map((imgSrc,index)=>/*#__PURE__*/_jsx(\"div\",{style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"img\",{src:imgSrc,alt:\"\".concat(room.type,\" - Imagen \").concat(index+1),style:{borderRadius:'8px'}})},index))})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,textAlign:'left',minHeight:'60px'},children:selectedDate&&checkOut&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontWeight:'bold'},children:[\"Noches: \",calculateNights()]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontWeight:'bold'},children:[\"Total: \",calculateTotalPrice(),\" CLP\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontSize:'0.8em'},children:[\"($ \",calculateTotalPriceInUSD(),\" USD)\"]})]})})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Personas:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedOption,onChange:e=>{setSelectedOption(parseInt(e.target.value));refreshPaypalButton();},style:{marginLeft:'20px',padding:'7px',fontSize:'12px',borderRadius:'10px',border:'1px solid #ddd'},children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1 Persona\"}),room.priceForTwo&&/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2 Personas\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),style:{padding:'10.2px 30px',backgroundColor:'#007bff',color:'#fff',border:'none',borderRadius:'25px',cursor:'pointer',fontSize:'18px',marginRight:'20px'},children:\"Volver\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!selectedDate||!checkOut||!isAvailable,onClick:()=>setShowForm(true),style:{padding:'11px 20px',backgroundColor:!selectedDate||!checkOut||!isAvailable?'#ccc':'#28a745',color:!selectedDate||!checkOut||!isAvailable?'#666':'#fff',border:'100px',borderRadius:'50px',cursor:!selectedDate||!checkOut||!isAvailable?'not-allowed':'pointer',fontSize:'16px'},children:\"Reservar\"})]}),showForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>e.preventDefault(),style:{marginTop:'20px',textAlign:'left',maxWidth:'600px',margin:'20px auto',padding:'20px',backgroundColor:'#f9f9f9',borderRadius:'8px',boxShadow:'0 2px 4px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Formulario de Reserva\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Nombre completo:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"clientName\",value:formData.clientName,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}}),selectedOption===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre completo (Persona 2):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"clientName2\",value:formData.clientName2,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"RUT o n\\xFAmero de pasaporte:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rutOrPassport\",value:formData.rutOrPassport,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}}),/*#__PURE__*/_jsx(\"label\",{children:\"Correo electr\\xF3nico (opcional):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"clientEmail\",value:formData.clientEmail,onChange:handleInputChange,style:{width:'100%',marginBottom:'10px'}}),/*#__PURE__*/_jsx(\"label\",{children:\"Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",value:formData.phone,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}}),/*#__PURE__*/_jsx(\"label\",{children:\"Nacionalidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nationality\",value:formData.nationality,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}}),/*#__PURE__*/_jsx(\"label\",{children:\"Direcci\\xF3n:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:formData.address,onChange:handleInputChange,required:true,style:{width:'100%',marginBottom:'10px'}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cantidad de noches: \",/*#__PURE__*/_jsx(\"strong\",{children:calculateNights()})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Precio total: \",/*#__PURE__*/_jsxs(\"strong\",{children:[calculateTotalPrice(),\" CLP\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total a pagar: \",calculateTotalPrice(),\" CLP ($ \",calculateTotalPriceInUSD(),\" USD)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsx(PaypalButton,{amount:calculateTotalPriceInUSD(),onPaymentSuccess:handlePaymentSuccess,onPaymentError:error=>{alert('Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.');console.error('Error en el pago:',error);},onPaymentCancel:()=>{alert('El pago fue cancelado por el usuario.');}},paypalKey),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'20px',fontWeight:'bold'},children:\"Tambi\\xE9n puedes confirmar tu reserva sin realizar un pago en l\\xEDnea.\"}),/*#__PURE__*/_jsx(\"button\",{ref:confirmReservationRef,className:\"confirm-reservation-btn\",onClick:handleConfirmReservation,style:{marginTop:'10px',backgroundColor:'#007BFF',color:'#fff',border:'none',padding:'10px 20px',borderRadius:'5px',cursor:'pointer'},children:\"Confirmar Reserva\"})]})]})]}),/*#__PURE__*/_jsx(Lightbox,{open:isLightboxOpen,close:()=>setLightboxOpen(false),slides:lightboxSlides,index:currentImageIndex})]});};export default RoomDetails;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","rooms","Calendar","PaypalButton","Carousel","Lightbox","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RoomDetails","paypalKey","setPaypalKey","isLightboxOpen","setLightboxOpen","currentImageIndex","setCurrentImageIndex","refreshPaypalButton","prevKey","confirmReservationRef","id","navigate","room","find","parseInt","selectedDate","setSelectedDate","checkOut","setCheckOut","isAvailable","setIsAvailable","selectedOption","setSelectedOption","showForm","setShowForm","error","setError","showCheckInCalendar","setShowCheckInCalendar","showCheckOutCalendar","setShowCheckOutCalendar","checkInRef","checkOutRef","formData","setFormData","clientName","clientName2","clientEmail","rutOrPassport","phone","nationality","address","formDataRef","current","handleClickOutside","event","calendarElements","isClickInsideCalendar","some","selector","target","closest","document","addEventListener","removeEventListener","checkAvailability","toISOString","split","_data$unavailableRoom","response","fetch","method","headers","body","JSON","stringify","checkIn","roomId","data","json","unavailableRooms","includes","console","handleInputChange","e","name","value","prev","_objectSpread","handleCheckInChange","date","getTime","nextDay","Date","setDate","getDate","handleCheckOutChange","handlePaymentSuccess","details","currentFormData","alert","reservationData","undefined","numberOfGuests","nights","calculateNights","totalCost","calculateTotalPrice","paymentMethod","paymentStatus","transactionId","ok","state","reservation","result","concat","message","handleConfirmReservation","preventDefault","log","exchangeRate","Math","ceil","convertToUSD","amountInCLP","toFixed","pricePerNight","priceForOne","priceForTwo","calculateTotalPriceInUSD","totalInCLP","roomImages","images","Array","isArray","length","image","lightboxSlides","map","imgSrc","src","children","style","padding","textAlign","fontSize","display","fontWeight","color","backgroundColor","border","borderRadius","cursor","type","marginTop","marginBottom","ref","position","onClick","toLocaleDateString","className","zIndex","stopPropagation","onClickDay","locale","minDate","justifyContent","alignItems","gap","flex","margin","maxWidth","showThumbs","infiniteLoop","autoPlay","interval","showStatus","onClickItem","index","alt","minHeight","onChange","marginLeft","marginRight","disabled","onSubmit","boxShadow","required","width","amount","onPaymentSuccess","onPaymentError","onPaymentCancel","open","close","slides"],"sources":["C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/src/pages/RoomDetails.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport rooms from '../data/rooms';\r\nimport Calendar from 'react-calendar';\r\nimport PaypalButton from '../PaypalButton';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport Lightbox from \"yet-another-react-lightbox\";\r\nimport \"yet-another-react-lightbox/styles.css\";\r\n\r\nconst RoomDetails = () => {\r\n    // Tus estados originales\r\n    const [paypalKey, setPaypalKey] = useState(0);\r\n    const [isLightboxOpen, setLightboxOpen] = useState(false);\r\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n    const refreshPaypalButton = () => setPaypalKey(prevKey => prevKey + 1);\r\n    const confirmReservationRef = useRef(null);\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const room = rooms.find((room) => room.id === parseInt(id));\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n    const [checkOut, setCheckOut] = useState(null);\r\n    const [isAvailable, setIsAvailable] = useState(false);\r\n    const [selectedOption, setSelectedOption] = useState(1);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [showCheckInCalendar, setShowCheckInCalendar] = useState(false);\r\n    const [showCheckOutCalendar, setShowCheckOutCalendar] = useState(false);\r\n    const checkInRef = useRef(null);\r\n    const checkOutRef = useRef(null);\r\n    const [formData, setFormData] = useState({\r\n        clientName: '',\r\n        clientName2: '',\r\n        clientEmail: '',\r\n        rutOrPassport: '',\r\n        phone: '',\r\n        nationality: '',\r\n        address: '',\r\n    });\r\n\r\n    // --- CAMBIO 1: Se AÑADEN estas líneas para solucionar el \"Estado Rancio\" ---\r\n    const formDataRef = useRef(formData);\r\n    useEffect(() => {\r\n        formDataRef.current = formData;\r\n    }, [formData]);\r\n    // --- FIN DEL CAMBIO 1 ---\r\n\r\n    // Tus useEffect originales no se modifican\r\n    useEffect(() => {\r\n        if (!isAvailable || !selectedDate || !checkOut) {\r\n            setShowForm(false);\r\n        }\r\n    }, [isAvailable, selectedDate, checkOut]);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            const calendarElements = [ '.react-calendar', '.react-calendar__navigation', '.react-calendar__navigation__arrow', '.react-calendar__tile', '.react-calendar__month-view__days' ];\r\n            const isClickInsideCalendar = calendarElements.some((selector) => event.target.closest(selector));\r\n            if (!isClickInsideCalendar) {\r\n                setShowCheckInCalendar(false);\r\n                setShowCheckOutCalendar(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => { document.removeEventListener('mousedown', handleClickOutside); };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const checkAvailability = async () => {\r\n            if (selectedDate && checkOut) {\r\n                if (selectedDate.toISOString().split('T')[0] === checkOut.toISOString().split('T')[0]) {\r\n                    setError('La fecha de ingreso no puede ser igual a la de salida.');\r\n                    setIsAvailable(false);\r\n                    return;\r\n                }\r\n                try {\r\n                    const response = await fetch('https://three-2cs3.onrender.com/api/reservations/check-availability', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({\r\n                            checkIn: selectedDate.toISOString().split('T')[0],\r\n                            checkOut: checkOut.toISOString().split('T')[0],\r\n                            roomId: room.id,\r\n                        }),\r\n                    });\r\n                    const data = await response.json();\r\n                    setError('');\r\n                    setIsAvailable(!data.unavailableRooms?.includes(room.id));\r\n                } catch (error) {\r\n                    console.error('Error al verificar disponibilidad:', error);\r\n                    setIsAvailable(false);\r\n                }\r\n            }\r\n        };\r\n        checkAvailability();\r\n    }, [selectedDate, checkOut, room.id]);\r\n\r\n    // Tus funciones handler originales no se modifican\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleCheckInChange = (date) => {\r\n        setSelectedDate(date);\r\n        setShowCheckInCalendar(false);\r\n        if (!checkOut || date.getTime() >= checkOut.getTime()) {\r\n            const nextDay = new Date(date);\r\n            nextDay.setDate(date.getDate() + 1);\r\n            setCheckOut(nextDay);\r\n        }\r\n        refreshPaypalButton();\r\n    };\r\n\r\n    const handleCheckOutChange = (date) => {\r\n        setCheckOut(date);\r\n        setShowCheckOutCalendar(false);\r\n        refreshPaypalButton();\r\n    };\r\n    \r\n    // --- CAMBIO 2: Se REEMPLAZA esta función para que use los datos actualizados ---\r\n    const handlePaymentSuccess = async (details) => {\r\n        const currentFormData = formDataRef.current; // Lee los datos frescos de la \"caja\"\r\n\r\n        const { clientName, rutOrPassport, phone, nationality, address } = currentFormData;\r\n        if (!clientName || !rutOrPassport || !phone || !nationality || !address) {\r\n            alert('Por favor, completa todos los campos del formulario para registrar la reserva pagada.');\r\n            return;\r\n        }\r\n      \r\n        const reservationData = {\r\n            roomId: room.id,\r\n            clientName: currentFormData.clientName,\r\n            clientName2: selectedOption === 2 ? currentFormData.clientName2 : undefined,\r\n            clientEmail: currentFormData.clientEmail || undefined,\r\n            rutOrPassport: currentFormData.rutOrPassport,\r\n            numberOfGuests: selectedOption,\r\n            checkIn: selectedDate?.toISOString().split('T')[0],\r\n            checkOut: checkOut?.toISOString().split('T')[0],\r\n            phone: currentFormData.phone,\r\n            nationality: currentFormData.nationality,\r\n            address: currentFormData.address,\r\n            nights: calculateNights(),\r\n            totalCost: calculateTotalPrice(),\r\n            paymentMethod: 'PayPal',\r\n            paymentStatus: 'pagado',\r\n            transactionId: details.id,\r\n        };\r\n        try {\r\n            const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(reservationData),\r\n            });\r\n            if (response.ok) {\r\n                navigate('/success', { state: { reservation: reservationData } });\r\n            } else {\r\n                const result = await response.json();\r\n                alert(`El pago fue exitoso, pero hubo un error al guardar la reserva: ${result.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al conectar con el servidor:', error);\r\n            alert('El pago fue exitoso, pero hubo un error al conectar con el servidor para guardar la reserva.');\r\n        }\r\n    };\r\n    // --- FIN DEL CAMBIO 2 ---\r\n\r\n    // El resto de tus funciones no se modifican\r\n    const handleConfirmReservation = async (e) => {\r\n        e.preventDefault();\r\n        const reservationData = {\r\n            roomId: room.id,\r\n            clientName: formData.clientName,\r\n            clientName2: selectedOption === 2 ? formData.clientName2 : undefined,\r\n            clientEmail: formData.clientEmail || undefined,\r\n            rutOrPassport: formData.rutOrPassport,\r\n            numberOfGuests: selectedOption,\r\n            checkIn: selectedDate?.toISOString().split('T')[0],\r\n            checkOut: checkOut?.toISOString().split('T')[0],\r\n            phone: formData.phone,\r\n            nationality: formData.nationality,\r\n            address: formData.address,\r\n            nights: calculateNights(),\r\n            totalCost: calculateTotalPrice(),\r\n            paymentMethod: 'En Hostal',\r\n            paymentStatus: 'pendiente',\r\n        };\r\n        console.log(\"Enviando al backend:\", reservationData);\r\n        try {\r\n            const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(reservationData),\r\n            });\r\n            if (response.ok) {\r\n                navigate('/success', { state: { reservation: reservationData } });\r\n            } else {\r\n                const result = await response.json();\r\n                alert(`Error al realizar la reserva: ${result.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al conectar con el servidor:', error);\r\n            alert('Hubo un error al conectar con el servidor.');\r\n        }\r\n    };\r\n\r\n    const exchangeRate = 900;\r\n    const calculateNights = () => { if (!selectedDate || !checkOut) return 0; return Math.ceil((checkOut - selectedDate) / (1000 * 60 * 60 * 24)); };\r\n    const convertToUSD = (amountInCLP) => { return (amountInCLP / exchangeRate).toFixed(2); };\r\n    const calculateTotalPrice = () => { const nights = calculateNights(); const pricePerNight = selectedOption === 1 ? room.priceForOne : room.priceForTwo; return nights * pricePerNight; };\r\n    const calculateTotalPriceInUSD = () => { const totalInCLP = calculateTotalPrice(); return convertToUSD(totalInCLP); };\r\n    const roomImages = (room.images && Array.isArray(room.images) && room.images.length > 0) ? room.images : [room.image];\r\n    const lightboxSlides = roomImages.map(imgSrc => ({ src: imgSrc }));\r\n\r\n    if (!room) { return <div>Habitación no encontrada</div> }\r\n\r\n    // Tu JSX permanece exactamente igual\r\n    return (\r\n        <div style={{ padding: '30px', textAlign: 'center', fontSize: '12px', }}>\r\n            <h1 style={{ display: 'inline-block', padding: '10px 20px', fontSize: '15px', fontWeight: 'bold', color: 'white', backgroundColor: '#007bff', border: '2px solidrgb(255, 255, 255)', borderRadius: '20px', textAlign: 'center', cursor: 'default' }}>{room.type}</h1>\r\n            <p><strong>ID:</strong> {room.id}</p>\r\n            <div style={{ marginTop: '10px', fontSize: '15px', }}>\r\n                <h2>Selecciona tus fechas</h2>\r\n                <div style={{ marginBottom: '20px' }}><div ref={checkInRef} style={{ border: '1px solid #ccc', padding: '10px', borderRadius: '30px', cursor: 'pointer', backgroundColor: '#f9f9f9', position: 'relative' }} onClick={() => setShowCheckInCalendar((prev) => !prev)}> {selectedDate ? selectedDate.toLocaleDateString('es-ES') : 'Selecciona fecha de ingreso'} {showCheckInCalendar && (<div className=\"react-calendar\" style={{ position: 'absolute', zIndex: 10 }} onClick={(e) => e.stopPropagation()}><Calendar onClickDay={(date) => { handleCheckInChange(date); setShowCheckInCalendar(false); }} value={selectedDate} locale=\"es-ES\" minDate={new Date()} /></div>)}</div></div>\r\n                <div style={{ marginBottom: '20px' }}><div ref={checkOutRef} style={{ border: '1px solid #ccc', padding: '10px', borderRadius: '20px', cursor: 'pointer', backgroundColor: '#f9f9f9', position: 'relative' }} onClick={() => setShowCheckOutCalendar((prev) => !prev)}> {checkOut ? checkOut.toLocaleDateString('es-ES') : 'Selecciona fecha de salida'} {showCheckOutCalendar && (<div className=\"react-calendar\" style={{ position: 'absolute', zIndex: 10 }} onClick={(e) => e.stopPropagation()}><Calendar onClickDay={(date) => { handleCheckOutChange(date); setShowCheckOutCalendar(false); }} value={checkOut} locale=\"es-ES\" minDate={selectedDate ? new Date(selectedDate.getTime() + 24 * 60 * 60 * 1000) : new Date()} /></div>)}</div></div>\r\n                {error && <p style={{ color: 'red', fontWeight: 'bold' }}>{error}</p>}\r\n                {selectedDate && checkOut && !error && (<p style={{ marginTop: '20px', fontSize: '18px', fontWeight: 'bold', color: isAvailable ? '#28a745' : '#dc3545', textAlign: 'center' }}>{isAvailable ? '¡Disponible!' : 'No disponible'}</p>)}\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '30px', marginBottom: '20px', textAlign: 'center' }}>\r\n                <div style={{ flex: 1, textAlign: 'center' }}><p style={{ margin: 0, fontSize: '0.8em', fontWeight: 'bold' }}>Precio por Noche</p><p style={{ margin: 0, fontSize: '0.7em' }}>{selectedOption === 1 ? `${room.priceForOne} CLP` : `${room.priceForTwo} CLP`}</p><p style={{ margin: 0, fontSize: '0.7em' }}>($ {selectedOption === 1 ? convertToUSD(room.priceForOne) : convertToUSD(room.priceForTwo)} USD)</p></div>\r\n                <div style={{ flex: 1, maxWidth: '250px', margin: '0 auto' }}><Carousel showThumbs={false} infiniteLoop={true} autoPlay={true} interval={3000} showStatus={false} onClickItem={(index) => { setCurrentImageIndex(index); setLightboxOpen(true); }}>{roomImages.map((imgSrc, index) => (<div key={index} style={{ cursor: 'pointer' }}><img src={imgSrc} alt={`${room.type} - Imagen ${index + 1}`} style={{ borderRadius: '8px' }} /></div>))}</Carousel></div>\r\n                <div style={{ flex: 1, textAlign: 'left', minHeight: '60px' }}>{selectedDate && checkOut && (<div><p style={{ margin: 0, fontWeight: 'bold' }}>Noches: {calculateNights()}</p><p style={{ margin: 0, fontWeight: 'bold' }}>Total: {calculateTotalPrice()} CLP</p><p style={{ margin: 0, fontSize: '0.8em' }}>($ {calculateTotalPriceInUSD()} USD)</p></div>)}</div>\r\n            </div>\r\n            <label>Personas:<select value={selectedOption} onChange={(e) => { setSelectedOption(parseInt(e.target.value)); refreshPaypalButton(); }} style={{ marginLeft: '20px', padding: '7px', fontSize: '12px', borderRadius: '10px', border: '1px solid #ddd' }}><option value={1}>1 Persona</option>{room.priceForTwo && <option value={2}>2 Personas</option>}</select></label>\r\n            <div style={{ marginBottom: '20px' }}><button onClick={() => navigate(-1)} style={{ padding: '10.2px 30px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '25px', cursor: 'pointer', fontSize: '18px', marginRight: '20px' }}>Volver</button><button disabled={!selectedDate || !checkOut || !isAvailable} onClick={() => setShowForm(true)} style={{ padding: '11px 20px', backgroundColor: !selectedDate || !checkOut || !isAvailable ? '#ccc' : '#28a745', color: !selectedDate || !checkOut || !isAvailable ? '#666' : '#fff', border: '100px', borderRadius: '50px', cursor: !selectedDate || !checkOut || !isAvailable ? 'not-allowed' : 'pointer', fontSize: '16px' }}>Reservar</button></div>\r\n            \r\n            {showForm && (\r\n                <form onSubmit={(e) => e.preventDefault()} style={{ marginTop: '20px', textAlign: 'left', maxWidth: '600px', margin: '20px auto', padding: '20px', backgroundColor: '#f9f9f9', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)' }}>\r\n                    <h3>Formulario de Reserva</h3>\r\n                    <label>Nombre completo:</label>\r\n                    <input type=\"text\" name=\"clientName\" value={formData.clientName} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    {selectedOption === 2 && (<>\r\n                        <label>Nombre completo (Persona 2):</label>\r\n                        <input type=\"text\" name=\"clientName2\" value={formData.clientName2} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    </>)}\r\n                    <label>RUT o número de pasaporte:</label>\r\n                    <input type=\"text\" name=\"rutOrPassport\" value={formData.rutOrPassport} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Correo electrónico (opcional):</label>\r\n                    <input type=\"email\" name=\"clientEmail\" value={formData.clientEmail} onChange={handleInputChange} style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Teléfono:</label>\r\n                    <input type=\"text\" name=\"phone\" value={formData.phone} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Nacionalidad:</label>\r\n                    <input type=\"text\" name=\"nationality\" value={formData.nationality} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Dirección:</label>\r\n                    <input type=\"text\" name=\"address\" value={formData.address} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <p>Cantidad de noches: <strong>{calculateNights()}</strong></p>\r\n                    <p>Precio total: <strong>{calculateTotalPrice()} CLP</strong></p>\r\n                    <div>\r\n                        <h3>Total a pagar: {calculateTotalPrice()} CLP ($ {calculateTotalPriceInUSD()} USD)</h3>\r\n                        <div className=\"payment-section\">\r\n                            <PaypalButton\r\n                                key={paypalKey}\r\n                                amount={calculateTotalPriceInUSD()}\r\n                                onPaymentSuccess={handlePaymentSuccess}\r\n                                onPaymentError={(error) => { alert('Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.'); console.error('Error en el pago:', error); }}\r\n                                onPaymentCancel={() => { alert('El pago fue cancelado por el usuario.'); }}\r\n                            />\r\n                            <p style={{ marginTop: '20px', fontWeight: 'bold' }}>También puedes confirmar tu reserva sin realizar un pago en línea.</p>\r\n                            <button\r\n                                ref={confirmReservationRef}\r\n                                className=\"confirm-reservation-btn\"\r\n                                onClick={handleConfirmReservation}\r\n                                style={{ marginTop: '10px', backgroundColor: '#007BFF', color: '#fff', border: 'none', padding: '10px 20px', borderRadius: '5px', cursor: 'pointer' }}\r\n                            >\r\n                                Confirmar Reserva\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            )}\r\n            <Lightbox open={isLightboxOpen} close={() => setLightboxOpen(false)} slides={lightboxSlides} index={currentImageIndex} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RoomDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}