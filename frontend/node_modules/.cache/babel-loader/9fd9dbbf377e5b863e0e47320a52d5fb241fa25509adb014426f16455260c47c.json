{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jonathan\\\\Desktop\\\\Proyecto Hostal\\\\frontend\\\\src\\\\pages\\\\RoomDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport rooms from '../data/rooms';\nimport Calendar from 'react-calendar';\nimport PaypalButton from '../PaypalButton';\nimport { Carousel } from 'react-responsive-carousel';\nimport Lightbox from \"yet-another-react-lightbox\";\nimport \"yet-another-react-lightbox/styles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RoomDetails = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const room = rooms.find(room => room.id === parseInt(id));\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [checkOut, setCheckOut] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(1);\n  const [formData, setFormData] = useState({\n    clientName: '',\n    clientName2: '',\n    clientEmail: '',\n    rutOrPassport: '',\n    phone: '',\n    nationality: '',\n    address: ''\n  });\n  const [paypalKey, setPaypalKey] = useState(0);\n  const [isLightboxOpen, setLightboxOpen] = useState(false);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [isAvailable, setIsAvailable] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [error, setError] = useState('');\n  const [showCheckInCalendar, setShowCheckInCalendar] = useState(false);\n  const [showCheckOutCalendar, setShowCheckOutCalendar] = useState(false);\n\n  // Esta \"ref\" guardará siempre la versión más actualizada de la reserva\n  const reservationDataRef = useRef({});\n  // Funciones de cálculo\n  const calculateNights = () => selectedDate && checkOut ? Math.ceil((checkOut - selectedDate) / (1000 * 60 * 60 * 24)) : 0;\n  const calculateTotalPrice = () => {\n    const nights = calculateNights();\n    if (!room) return 0;\n    const pricePerNight = selectedOption === 1 ? room.priceForOne : room.priceForTwo;\n    return nights * pricePerNight;\n  };\n\n  // Este useEffect reconstruye el objeto de la reserva cada vez que un dato cambia\n  useEffect(() => {\n    reservationDataRef.current = {\n      roomId: room === null || room === void 0 ? void 0 : room.id,\n      clientName: formData.clientName,\n      clientName2: selectedOption === 2 ? formData.clientName2 : undefined,\n      clientEmail: formData.clientEmail || undefined,\n      rutOrPassport: formData.rutOrPassport,\n      numberOfGuests: selectedOption,\n      checkIn: selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.toISOString().split('T')[0],\n      checkOut: checkOut === null || checkOut === void 0 ? void 0 : checkOut.toISOString().split('T')[0],\n      phone: formData.phone,\n      nationality: formData.nationality,\n      address: formData.address,\n      nights: calculateNights(),\n      totalCost: calculateTotalPrice()\n    };\n  }, [formData, selectedDate, checkOut, selectedOption, room]);\n\n  // La función de pago lee la \"ref\" para obtener los datos más frescos\n  const handlePaymentSuccess = async details => {\n    const currentReservationData = reservationDataRef.current;\n    const {\n      clientName,\n      rutOrPassport,\n      phone,\n      nationality,\n      address\n    } = currentReservationData;\n    if (!clientName || !rutOrPassport || !phone || !nationality || !address) {\n      alert('Por favor, completa todos los campos del formulario para registrar la reserva pagada.');\n      return;\n    }\n    const finalReservationData = {\n      ...currentReservationData,\n      paymentMethod: 'PayPal',\n      paymentStatus: 'pagado',\n      transactionId: details.purchase_units[0].payments.captures[0].id\n    };\n    try {\n      const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(finalReservationData)\n      });\n      if (response.ok) {\n        navigate('/success', {\n          state: {\n            reservation: finalReservationData\n          }\n        });\n      } else {\n        const result = await response.json();\n        alert(`El pago fue exitoso, pero hubo un error al guardar la reserva: ${result.message}`);\n      }\n    } catch (error) {\n      console.error('Error al conectar con el servidor:', error);\n      alert('El pago fue exitoso, pero hubo un error al conectar con el servidor para guardar la reserva.');\n    }\n  };\n  const handleConfirmReservation = async e => {\n    e.preventDefault();\n    const finalReservationData = {\n      ...reservationDataRef.current,\n      paymentMethod: 'En Hostal',\n      paymentStatus: 'pendiente'\n    };\n    try {\n      const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(finalReservationData)\n      });\n      if (response.ok) {\n        navigate('/success', {\n          state: {\n            reservation: finalReservationData\n          }\n        });\n      } else {\n        const result = await response.json();\n        alert(`Error al realizar la reserva: ${result.message}`);\n      }\n    } catch (error) {\n      console.error('Error al conectar con el servidor:', error);\n      alert('Hubo un error al conectar con el servidor.');\n    }\n  };\n  useEffect(() => {\n    if (!isAvailable || !selectedDate || !checkOut) {\n      setShowForm(false);\n    }\n  }, [isAvailable, selectedDate, checkOut]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleCheckInChange = date => {\n    setSelectedDate(date);\n    setShowCheckInCalendar(false);\n    if (!checkOut || date.getTime() >= checkOut.getTime()) {\n      const nextDay = new Date(date);\n      nextDay.setDate(date.getDate() + 1);\n      setCheckOut(nextDay);\n    }\n    refreshPaypalButton();\n  };\n  const handleCheckOutChange = date => {\n    setCheckOut(date);\n    setShowCheckOutCalendar(false);\n    refreshPaypalButton();\n  };\n  const exchangeRate = 900;\n  const refreshPaypalButton = () => setPaypalKey(prevKey => prevKey + 1);\n  const convertToUSD = amountInCLP => (amountInCLP / exchangeRate).toFixed(2);\n  const calculateTotalPriceInUSD = () => convertToUSD(calculateTotalPrice());\n  const roomImages = room !== null && room !== void 0 && room.images && Array.isArray(room.images) && room.images.length > 0 ? room.images : [room === null || room === void 0 ? void 0 : room.image];\n  const lightboxSlides = (roomImages === null || roomImages === void 0 ? void 0 : roomImages.map(imgSrc => ({\n    src: imgSrc\n  }))) || [];\n  if (!room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Habitaci\\xF3n no encontrada\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '30px',\n      textAlign: 'center',\n      fontSize: '12px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        display: 'inline-block',\n        padding: '10px 20px',\n        fontSize: '15px',\n        fontWeight: 'bold',\n        color: 'white',\n        backgroundColor: '#007bff',\n        border: '2px solidrgb(255, 255, 255)',\n        borderRadius: '20px',\n        textAlign: 'center',\n        cursor: 'default'\n      },\n      children: room.type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"ID:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 16\n      }, this), \" \", room.id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '10px',\n        fontSize: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Selecciona tus fechas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: '1px solid #ccc',\n            padding: '10px',\n            borderRadius: '30px',\n            cursor: 'pointer',\n            backgroundColor: '#f9f9f9',\n            position: 'relative'\n          },\n          onClick: () => setShowCheckInCalendar(prev => !prev),\n          children: [\" \", selectedDate ? selectedDate.toLocaleDateString('es-ES') : 'Selecciona fecha de ingreso', \" \", showCheckInCalendar && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"react-calendar\",\n            style: {\n              position: 'absolute',\n              zIndex: 10\n            },\n            onClick: e => e.stopPropagation(),\n            children: /*#__PURE__*/_jsxDEV(Calendar, {\n              onClickDay: date => {\n                handleCheckInChange(date);\n              },\n              value: selectedDate,\n              locale: \"es-ES\",\n              minDate: new Date()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 491\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 377\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: '1px solid #ccc',\n            padding: '10px',\n            borderRadius: '20px',\n            cursor: 'pointer',\n            backgroundColor: '#f9f9f9',\n            position: 'relative'\n          },\n          onClick: () => setShowCheckOutCalendar(prev => !prev),\n          children: [\" \", checkOut ? checkOut.toLocaleDateString('es-ES') : 'Selecciona fecha de salida', \" \", showCheckOutCalendar && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"react-calendar\",\n            style: {\n              position: 'absolute',\n              zIndex: 10\n            },\n            onClick: e => e.stopPropagation(),\n            children: /*#__PURE__*/_jsxDEV(Calendar, {\n              onClickDay: date => {\n                handleCheckOutChange(date);\n              },\n              value: checkOut,\n              locale: \"es-ES\",\n              minDate: selectedDate ? new Date(selectedDate.getTime() + 24 * 60 * 60 * 1000) : new Date()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 484\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 370\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red',\n          fontWeight: 'bold'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 27\n      }, this), isAvailable && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '20px',\n          fontSize: '18px',\n          fontWeight: 'bold',\n          color: '#28a745',\n          textAlign: 'center'\n        },\n        children: \"\\xA1Disponible!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        gap: '30px',\n        marginBottom: '20px',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.8em',\n            fontWeight: 'bold'\n          },\n          children: \"Precio por Noche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 63\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.7em'\n          },\n          children: selectedOption === 1 ? `${room.priceForOne} CLP` : `${room.priceForTwo} CLP`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 147\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.7em'\n          },\n          children: [\"($ \", selectedOption === 1 ? convertToUSD(room.priceForOne) : convertToUSD(room.priceForTwo), \" USD)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 273\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          maxWidth: '250px',\n          margin: '0 auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(Carousel, {\n          showThumbs: false,\n          infiniteLoop: true,\n          autoPlay: true,\n          interval: 3000,\n          showStatus: false,\n          onClickItem: index => {\n            setCurrentImageIndex(index);\n            setLightboxOpen(true);\n          },\n          children: roomImages.map((imgSrc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              cursor: 'pointer'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imgSrc,\n              alt: `${room.type} - Imagen ${index + 1}`,\n              style: {\n                borderRadius: '8px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 329\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 282\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 79\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          textAlign: 'left',\n          minHeight: '60px'\n        },\n        children: selectedDate && checkOut && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontWeight: 'bold'\n            },\n            children: [\"Noches: \", calculateNights()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 115\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontWeight: 'bold'\n            },\n            children: [\"Total: \", calculateTotalPrice(), \" CLP\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 191\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontSize: '0.8em'\n            },\n            children: [\"($ \", calculateTotalPriceInUSD(), \" USD)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 274\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 110\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Personas:\", /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedOption,\n        onChange: e => {\n          setSelectedOption(parseInt(e.target.value));\n          refreshPaypalButton();\n        },\n        style: {\n          marginLeft: '20px',\n          padding: '7px',\n          fontSize: '12px',\n          borderRadius: '10px',\n          border: '1px solid #ddd'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 1,\n          children: \"1 Persona\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 263\n        }, this), room.priceForTwo && /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 2,\n          children: \"2 Personas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 320\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        style: {\n          padding: '10.2px 30px',\n          backgroundColor: '#007bff',\n          color: '#fff',\n          border: 'none',\n          borderRadius: '25px',\n          cursor: 'pointer',\n          fontSize: '18px',\n          marginRight: '20px'\n        },\n        children: \"Volver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 51\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !isAvailable,\n        onClick: () => setShowForm(true),\n        style: {\n          padding: '11px 20px',\n          backgroundColor: !isAvailable ? '#ccc' : '#28a745',\n          color: !isAvailable ? '#666' : '#fff',\n          border: '100px',\n          borderRadius: '50px',\n          cursor: !isAvailable ? 'not-allowed' : 'pointer',\n          fontSize: '16px'\n        },\n        children: \"Reservar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 277\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => e.preventDefault(),\n      style: {\n        marginTop: '20px',\n        textAlign: 'left',\n        maxWidth: '600px',\n        margin: '20px auto',\n        padding: '20px',\n        backgroundColor: '#f9f9f9',\n        borderRadius: '8px',\n        boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Formulario de Reserva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nombre completo:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"clientName\",\n        value: formData.clientName,\n        onChange: handleInputChange,\n        required: true,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }, this), selectedOption === 2 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nombre completo (Persona 2):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"clientName2\",\n          value: formData.clientName2,\n          onChange: handleInputChange,\n          required: true,\n          style: {\n            width: '100%',\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"RUT o n\\xFAmero de pasaporte:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"rutOrPassport\",\n        value: formData.rutOrPassport,\n        onChange: handleInputChange,\n        required: true,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Correo electr\\xF3nico (opcional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"clientEmail\",\n        value: formData.clientEmail,\n        onChange: handleInputChange,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tel\\xE9fono:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"phone\",\n        value: formData.phone,\n        onChange: handleInputChange,\n        required: true,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nacionalidad:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"nationality\",\n        value: formData.nationality,\n        onChange: handleInputChange,\n        required: true,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Direcci\\xF3n:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"address\",\n        value: formData.address,\n        onChange: handleInputChange,\n        required: true,\n        style: {\n          width: '100%',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Cantidad de noches: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: calculateNights()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Precio total: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [calculateTotalPrice(), \" CLP\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Total a pagar: \", calculateTotalPrice(), \" CLP ($ \", calculateTotalPriceInUSD(), \" USD)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-section\",\n          children: [/*#__PURE__*/_jsxDEV(PaypalButton, {\n            amount: calculateTotalPriceInUSD(),\n            onPaymentSuccess: handlePaymentSuccess,\n            onPaymentError: error => {\n              alert('Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.');\n              console.error('Error en el pago:', error);\n            },\n            onPaymentCancel: () => {\n              alert('El pago fue cancelado por el usuario.');\n            }\n          }, paypalKey, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: '20px',\n              fontWeight: 'bold'\n            },\n            children: \"Tambi\\xE9n puedes confirmar tu reserva sin realizar un pago en l\\xEDnea.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"confirm-reservation-btn\",\n            onClick: handleConfirmReservation,\n            style: {\n              marginTop: '10px',\n              backgroundColor: '#007BFF',\n              color: '#fff',\n              border: 'none',\n              padding: '10px 20px',\n              borderRadius: '5px',\n              cursor: 'pointer'\n            },\n            children: \"Confirmar Reserva\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Lightbox, {\n      open: isLightboxOpen,\n      close: () => setLightboxOpen(false),\n      slides: lightboxSlides,\n      index: currentImageIndex\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 9\n  }, this);\n};\n_s(RoomDetails, \"OZ53bZWyP3Tb4nbCDzvPrvmVM/w=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = RoomDetails;\nexport default RoomDetails;\nvar _c;\n$RefreshReg$(_c, \"RoomDetails\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","rooms","Calendar","PaypalButton","Carousel","Lightbox","jsxDEV","_jsxDEV","Fragment","_Fragment","RoomDetails","_s","id","navigate","room","find","parseInt","selectedDate","setSelectedDate","checkOut","setCheckOut","selectedOption","setSelectedOption","formData","setFormData","clientName","clientName2","clientEmail","rutOrPassport","phone","nationality","address","paypalKey","setPaypalKey","isLightboxOpen","setLightboxOpen","currentImageIndex","setCurrentImageIndex","isAvailable","setIsAvailable","showForm","setShowForm","error","setError","showCheckInCalendar","setShowCheckInCalendar","showCheckOutCalendar","setShowCheckOutCalendar","reservationDataRef","calculateNights","Math","ceil","calculateTotalPrice","nights","pricePerNight","priceForOne","priceForTwo","current","roomId","undefined","numberOfGuests","checkIn","toISOString","split","totalCost","handlePaymentSuccess","details","currentReservationData","alert","finalReservationData","paymentMethod","paymentStatus","transactionId","purchase_units","payments","captures","response","fetch","method","headers","body","JSON","stringify","ok","state","reservation","result","json","message","console","handleConfirmReservation","e","preventDefault","handleInputChange","name","value","target","prev","handleCheckInChange","date","getTime","nextDay","Date","setDate","getDate","refreshPaypalButton","handleCheckOutChange","exchangeRate","prevKey","convertToUSD","amountInCLP","toFixed","calculateTotalPriceInUSD","roomImages","images","Array","isArray","length","image","lightboxSlides","map","imgSrc","src","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","textAlign","fontSize","display","fontWeight","color","backgroundColor","border","borderRadius","cursor","type","marginTop","marginBottom","position","onClick","toLocaleDateString","className","zIndex","stopPropagation","onClickDay","locale","minDate","justifyContent","alignItems","gap","flex","margin","maxWidth","showThumbs","infiniteLoop","autoPlay","interval","showStatus","onClickItem","index","alt","minHeight","onChange","marginLeft","marginRight","disabled","onSubmit","boxShadow","required","width","amount","onPaymentSuccess","onPaymentError","onPaymentCancel","open","close","slides","_c","$RefreshReg$"],"sources":["C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/src/pages/RoomDetails.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport rooms from '../data/rooms';\r\nimport Calendar from 'react-calendar';\r\nimport PaypalButton from '../PaypalButton';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport Lightbox from \"yet-another-react-lightbox\";\r\nimport \"yet-another-react-lightbox/styles.css\";\r\n\r\nconst RoomDetails = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const room = rooms.find((room) => room.id === parseInt(id));\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n    const [checkOut, setCheckOut] = useState(null);\r\n    const [selectedOption, setSelectedOption] = useState(1);\r\n    const [formData, setFormData] = useState({\r\n        clientName: '', clientName2: '', clientEmail: '',\r\n        rutOrPassport: '', phone: '', nationality: '', address: '',\r\n    });\r\n    const [paypalKey, setPaypalKey] = useState(0);\r\n    const [isLightboxOpen, setLightboxOpen] = useState(false);\r\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n    const [isAvailable, setIsAvailable] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [showCheckInCalendar, setShowCheckInCalendar] = useState(false);\r\n    const [showCheckOutCalendar, setShowCheckOutCalendar] = useState(false);\r\n    \r\n    // Esta \"ref\" guardará siempre la versión más actualizada de la reserva\r\n    const reservationDataRef = useRef({});\r\n// Funciones de cálculo\r\n    const calculateNights = () => (selectedDate && checkOut) ? Math.ceil((checkOut - selectedDate) / (1000 * 60 * 60 * 24)) : 0;\r\n    const calculateTotalPrice = () => {\r\n        const nights = calculateNights();\r\n        if (!room) return 0;\r\n        const pricePerNight = selectedOption === 1 ? room.priceForOne : room.priceForTwo;\r\n        return nights * pricePerNight;\r\n    };\r\n\r\n    // Este useEffect reconstruye el objeto de la reserva cada vez que un dato cambia\r\n    useEffect(() => {\r\n        reservationDataRef.current = {\r\n            roomId: room?.id,\r\n            clientName: formData.clientName,\r\n            clientName2: selectedOption === 2 ? formData.clientName2 : undefined,\r\n            clientEmail: formData.clientEmail || undefined,\r\n            rutOrPassport: formData.rutOrPassport,\r\n            numberOfGuests: selectedOption,\r\n            checkIn: selectedDate?.toISOString().split('T')[0],\r\n            checkOut: checkOut?.toISOString().split('T')[0],\r\n            phone: formData.phone,\r\n            nationality: formData.nationality,\r\n            address: formData.address,\r\n            nights: calculateNights(),\r\n            totalCost: calculateTotalPrice(),\r\n        };\r\n    }, [formData, selectedDate, checkOut, selectedOption, room]);\r\n\r\n    // La función de pago lee la \"ref\" para obtener los datos más frescos\r\n    const handlePaymentSuccess = async (details) => {\r\n        const currentReservationData = reservationDataRef.current;\r\n        const { clientName, rutOrPassport, phone, nationality, address } = currentReservationData;\r\n\r\n        if (!clientName || !rutOrPassport || !phone || !nationality || !address) {\r\n            alert('Por favor, completa todos los campos del formulario para registrar la reserva pagada.');\r\n            return;\r\n        }\r\n\r\n        const finalReservationData = {\r\n            ...currentReservationData,\r\n            paymentMethod: 'PayPal',\r\n            paymentStatus: 'pagado',\r\n            transactionId: details.purchase_units[0].payments.captures[0].id,\r\n        };\r\n\r\n        try {\r\n            const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(finalReservationData),\r\n            });\r\n            if (response.ok) {\r\n                navigate('/success', { state: { reservation: finalReservationData } });\r\n            } else {\r\n                const result = await response.json();\r\n                alert(`El pago fue exitoso, pero hubo un error al guardar la reserva: ${result.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al conectar con el servidor:', error);\r\n            alert('El pago fue exitoso, pero hubo un error al conectar con el servidor para guardar la reserva.');\r\n        }\r\n    };\r\n    \r\n    const handleConfirmReservation = async (e) => {\r\n        e.preventDefault();\r\n        const finalReservationData = {\r\n            ...reservationDataRef.current,\r\n            paymentMethod: 'En Hostal',\r\n            paymentStatus: 'pendiente',\r\n        };\r\n        try {\r\n            const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(finalReservationData),\r\n            });\r\n            if (response.ok) {\r\n                navigate('/success', { state: { reservation: finalReservationData } });\r\n            } else {\r\n                const result = await response.json();\r\n                alert(`Error al realizar la reserva: ${result.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al conectar con el servidor:', error);\r\n            alert('Hubo un error al conectar con el servidor.');\r\n        }\r\n    };\r\n    \r\n    useEffect(() => {\r\n        if (!isAvailable || !selectedDate || !checkOut) { setShowForm(false); }\r\n    }, [isAvailable, selectedDate, checkOut]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleCheckInChange = (date) => {\r\n        setSelectedDate(date);\r\n        setShowCheckInCalendar(false);\r\n        if (!checkOut || date.getTime() >= checkOut.getTime()) {\r\n            const nextDay = new Date(date);\r\n            nextDay.setDate(date.getDate() + 1);\r\n            setCheckOut(nextDay);\r\n        }\r\n        refreshPaypalButton();\r\n    };\r\n\r\n    const handleCheckOutChange = (date) => {\r\n        setCheckOut(date);\r\n        setShowCheckOutCalendar(false);\r\n        refreshPaypalButton();\r\n    };\r\n\r\n    const exchangeRate = 900;\r\n    const refreshPaypalButton = () => setPaypalKey(prevKey => prevKey + 1);\r\n    const convertToUSD = (amountInCLP) => (amountInCLP / exchangeRate).toFixed(2);\r\n    const calculateTotalPriceInUSD = () => convertToUSD(calculateTotalPrice());\r\n    const roomImages = room?.images && Array.isArray(room.images) && room.images.length > 0 ? room.images : [room?.image];\r\n    const lightboxSlides = roomImages?.map(imgSrc => ({ src: imgSrc })) || [];\r\n\r\n    if (!room) { return <div>Habitación no encontrada</div> }\r\n\r\nreturn (\r\n        <div style={{ padding: '30px', textAlign: 'center', fontSize: '12px', }}>\r\n            <h1 style={{ display: 'inline-block', padding: '10px 20px', fontSize: '15px', fontWeight: 'bold', color: 'white', backgroundColor: '#007bff', border: '2px solidrgb(255, 255, 255)', borderRadius: '20px', textAlign: 'center', cursor: 'default' }}>{room.type}</h1>\r\n            <p><strong>ID:</strong> {room.id}</p>\r\n            <div style={{ marginTop: '10px', fontSize: '15px', }}>\r\n                <h2>Selecciona tus fechas</h2>\r\n                <div style={{ marginBottom: '20px' }}><div style={{ border: '1px solid #ccc', padding: '10px', borderRadius: '30px', cursor: 'pointer', backgroundColor: '#f9f9f9', position: 'relative' }} onClick={() => setShowCheckInCalendar((prev) => !prev)}> {selectedDate ? selectedDate.toLocaleDateString('es-ES') : 'Selecciona fecha de ingreso'} {showCheckInCalendar && (<div className=\"react-calendar\" style={{ position: 'absolute', zIndex: 10 }} onClick={(e) => e.stopPropagation()}><Calendar onClickDay={(date) => { handleCheckInChange(date); }} value={selectedDate} locale=\"es-ES\" minDate={new Date()} /></div>)}</div></div>\r\n                <div style={{ marginBottom: '20px' }}><div style={{ border: '1px solid #ccc', padding: '10px', borderRadius: '20px', cursor: 'pointer', backgroundColor: '#f9f9f9', position: 'relative' }} onClick={() => setShowCheckOutCalendar((prev) => !prev)}> {checkOut ? checkOut.toLocaleDateString('es-ES') : 'Selecciona fecha de salida'} {showCheckOutCalendar && (<div className=\"react-calendar\" style={{ position: 'absolute', zIndex: 10 }} onClick={(e) => e.stopPropagation()}><Calendar onClickDay={(date) => { handleCheckOutChange(date); }} value={checkOut} locale=\"es-ES\" minDate={selectedDate ? new Date(selectedDate.getTime() + 24 * 60 * 60 * 1000) : new Date()} /></div>)}</div></div>\r\n                {error && <p style={{ color: 'red', fontWeight: 'bold' }}>{error}</p>}\r\n                {isAvailable && <p style={{ marginTop: '20px', fontSize: '18px', fontWeight: 'bold', color: '#28a745', textAlign: 'center' }}>¡Disponible!</p>}\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '30px', marginBottom: '20px', textAlign: 'center' }}>\r\n                <div style={{ flex: 1, textAlign: 'center' }}><p style={{ margin: 0, fontSize: '0.8em', fontWeight: 'bold' }}>Precio por Noche</p><p style={{ margin: 0, fontSize: '0.7em' }}>{selectedOption === 1 ? `${room.priceForOne} CLP` : `${room.priceForTwo} CLP`}</p><p style={{ margin: 0, fontSize: '0.7em' }}>($ {selectedOption === 1 ? convertToUSD(room.priceForOne) : convertToUSD(room.priceForTwo)} USD)</p></div>\r\n                <div style={{ flex: 1, maxWidth: '250px', margin: '0 auto' }}><Carousel showThumbs={false} infiniteLoop autoPlay interval={3000} showStatus={false} onClickItem={(index) => { setCurrentImageIndex(index); setLightboxOpen(true); }}>{roomImages.map((imgSrc, index) => (<div key={index} style={{ cursor: 'pointer' }}><img src={imgSrc} alt={`${room.type} - Imagen ${index + 1}`} style={{ borderRadius: '8px' }} /></div>))}</Carousel></div>\r\n                <div style={{ flex: 1, textAlign: 'left', minHeight: '60px' }}>{selectedDate && checkOut && (<div><p style={{ margin: 0, fontWeight: 'bold' }}>Noches: {calculateNights()}</p><p style={{ margin: 0, fontWeight: 'bold' }}>Total: {calculateTotalPrice()} CLP</p><p style={{ margin: 0, fontSize: '0.8em' }}>($ {calculateTotalPriceInUSD()} USD)</p></div>)}</div>\r\n            </div>\r\n            <label>Personas:<select value={selectedOption} onChange={(e) => { setSelectedOption(parseInt(e.target.value)); refreshPaypalButton(); }} style={{ marginLeft: '20px', padding: '7px', fontSize: '12px', borderRadius: '10px', border: '1px solid #ddd' }}><option value={1}>1 Persona</option>{room.priceForTwo && <option value={2}>2 Personas</option>}</select></label>\r\n            <div style={{ marginBottom: '20px' }}><button onClick={() => navigate(-1)} style={{ padding: '10.2px 30px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '25px', cursor: 'pointer', fontSize: '18px', marginRight: '20px' }}>Volver</button><button disabled={!isAvailable} onClick={() => setShowForm(true)} style={{ padding: '11px 20px', backgroundColor: !isAvailable ? '#ccc' : '#28a745', color: !isAvailable ? '#666' : '#fff', border: '100px', borderRadius: '50px', cursor: !isAvailable ? 'not-allowed' : 'pointer', fontSize: '16px' }}>Reservar</button></div>\r\n            \r\n            {showForm && (\r\n                <form onSubmit={(e) => e.preventDefault()} style={{ marginTop: '20px', textAlign: 'left', maxWidth: '600px', margin: '20px auto', padding: '20px', backgroundColor: '#f9f9f9', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)' }}>\r\n                    <h3>Formulario de Reserva</h3>\r\n                    <label>Nombre completo:</label>\r\n                    <input type=\"text\" name=\"clientName\" value={formData.clientName} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    {selectedOption === 2 && (<>\r\n                        <label>Nombre completo (Persona 2):</label>\r\n                        <input type=\"text\" name=\"clientName2\" value={formData.clientName2} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    </>)}\r\n                    <label>RUT o número de pasaporte:</label>\r\n                    <input type=\"text\" name=\"rutOrPassport\" value={formData.rutOrPassport} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Correo electrónico (opcional):</label>\r\n                    <input type=\"email\" name=\"clientEmail\" value={formData.clientEmail} onChange={handleInputChange} style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Teléfono:</label>\r\n                    <input type=\"text\" name=\"phone\" value={formData.phone} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Nacionalidad:</label>\r\n                    <input type=\"text\" name=\"nationality\" value={formData.nationality} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <label>Dirección:</label>\r\n                    <input type=\"text\" name=\"address\" value={formData.address} onChange={handleInputChange} required style={{ width: '100%', marginBottom: '10px' }} />\r\n                    <p>Cantidad de noches: <strong>{calculateNights()}</strong></p>\r\n                    <p>Precio total: <strong>{calculateTotalPrice()} CLP</strong></p>\r\n                    <div>\r\n                        <h3>Total a pagar: {calculateTotalPrice()} CLP ($ {calculateTotalPriceInUSD()} USD)</h3>\r\n                        <div className=\"payment-section\">\r\n                            <PaypalButton\r\n                                key={paypalKey}\r\n                                amount={calculateTotalPriceInUSD()}\r\n                                onPaymentSuccess={handlePaymentSuccess}\r\n                                onPaymentError={(error) => { alert('Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.'); console.error('Error en el pago:', error); }}\r\n                                onPaymentCancel={() => { alert('El pago fue cancelado por el usuario.'); }}\r\n                            />\r\n                            <p style={{ marginTop: '20px', fontWeight: 'bold' }}>También puedes confirmar tu reserva sin realizar un pago en línea.</p>\r\n                            <button\r\n                                className=\"confirm-reservation-btn\"\r\n                                onClick={handleConfirmReservation}\r\n                                style={{ marginTop: '10px', backgroundColor: '#007BFF', color: '#fff', border: 'none', padding: '10px 20px', borderRadius: '5px', cursor: 'pointer' }}\r\n                            >\r\n                                Confirmar Reserva\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            )}\r\n            <Lightbox open={isLightboxOpen} close={() => setLightboxOpen(false)} slides={lightboxSlides} index={currentImageIndex} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RoomDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}