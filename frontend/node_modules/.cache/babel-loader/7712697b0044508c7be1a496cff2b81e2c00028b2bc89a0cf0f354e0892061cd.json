{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jonathan\\\\Desktop\\\\Proyecto Hostal\\\\frontend\\\\src\\\\PaypalButton.js\",\n  _s = $RefreshSig$();\n// Contenido completo y corregido para PaypalButton.js\n\nimport React from \"react\";\nimport { PayPalButtons, usePayPalScriptReducer } from \"@paypal/react-paypal-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PaypalButton({\n  amount,\n  reservationDetails,\n  onPaymentSuccess,\n  onPaymentError,\n  onPaymentCancel\n}) {\n  _s();\n  const [{\n    isPending\n  }] = usePayPalScriptReducer();\n  const isFormValid = () => {\n    if (!reservationDetails) return false;\n    // CORREGIDO: de clientName1 a clientName\n    const {\n      clientName,\n      rutOrPassport,\n      phone,\n      nationality,\n      address\n    } = reservationDetails;\n    return clientName && rutOrPassport && phone && nationality && address;\n  };\n  const createOrder = (data, actions) => {\n    // AÑADIDO: Esta línea nos mostrará en la consola qué datos está recibiendo el botón\n    console.log(\"Datos recibidos por el botón de PayPal:\", reservationDetails);\n    if (!isFormValid()) {\n      alert(\"Por favor, completa todos los campos del formulario antes de pagar.\");\n      return Promise.reject(new Error(\"Formulario inválido\"));\n    }\n    return actions.order.create({\n      purchase_units: [{\n        amount: {\n          value: amount,\n          currency_code: \"USD\"\n        }\n      }]\n    });\n  };\n  const onApprove = (data, actions) => {\n    return actions.order.capture().then(async details => {\n      const reservationData = {\n        ...reservationDetails,\n        paymentMethod: 'PayPal',\n        paymentStatus: 'pagado',\n        // CORREGIDO: de estado_pago a paymentStatus\n        transactionId: details.id // CORREGIDO: de paypalTransactionId a transactionId\n      };\n      try {\n        const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(reservationData)\n        });\n        if (!response.ok) throw new Error('El servidor no pudo guardar la reserva.');\n        onPaymentSuccess(reservationData);\n      } catch (error) {\n        onPaymentError(error.message);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isPending ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 20\n    }, this) : /*#__PURE__*/_jsxDEV(PayPalButtons, {\n      createOrder: createOrder,\n      onApprove: onApprove,\n      onCancel: onPaymentCancel,\n      style: {\n        layout: \"vertical\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(PaypalButton, \"RjiHh9V02YoiBlGRVsHKbv0Sng4=\", false, function () {\n  return [usePayPalScriptReducer];\n});\n_c = PaypalButton;\nvar _c;\n$RefreshReg$(_c, \"PaypalButton\");","map":{"version":3,"names":["React","PayPalButtons","usePayPalScriptReducer","jsxDEV","_jsxDEV","PaypalButton","amount","reservationDetails","onPaymentSuccess","onPaymentError","onPaymentCancel","_s","isPending","isFormValid","clientName","rutOrPassport","phone","nationality","address","createOrder","data","actions","console","log","alert","Promise","reject","Error","order","create","purchase_units","value","currency_code","onApprove","capture","then","details","reservationData","paymentMethod","paymentStatus","transactionId","id","response","fetch","method","headers","body","JSON","stringify","ok","error","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onCancel","style","layout","_c","$RefreshReg$"],"sources":["C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/src/PaypalButton.js"],"sourcesContent":["// Contenido completo y corregido para PaypalButton.js\r\n\r\nimport React from \"react\";\r\nimport { PayPalButtons, usePayPalScriptReducer } from \"@paypal/react-paypal-js\";\r\n\r\nexport default function PaypalButton({ amount, reservationDetails, onPaymentSuccess, onPaymentError, onPaymentCancel }) {\r\n  const [{ isPending }] = usePayPalScriptReducer();\r\n\r\n  const isFormValid = () => {\r\n    if (!reservationDetails) return false;\r\n    // CORREGIDO: de clientName1 a clientName\r\n    const { clientName, rutOrPassport, phone, nationality, address } = reservationDetails;\r\n    return clientName && rutOrPassport && phone && nationality && address;\r\n  };\r\n\r\n  const createOrder = (data, actions) => {\r\n    // AÑADIDO: Esta línea nos mostrará en la consola qué datos está recibiendo el botón\r\n    console.log(\"Datos recibidos por el botón de PayPal:\", reservationDetails);\r\n\r\n    if (!isFormValid()) {\r\n      alert(\"Por favor, completa todos los campos del formulario antes de pagar.\");\r\n      return Promise.reject(new Error(\"Formulario inválido\"));\r\n    }\r\n    \r\n    return actions.order.create({\r\n      purchase_units: [ { amount: { value: amount, currency_code: \"USD\" } } ],\r\n    });\r\n  };\r\n\r\n  const onApprove = (data, actions) => {\r\n    return actions.order.capture().then(async (details) => {\r\n      const reservationData = {\r\n        ...reservationDetails,\r\n        paymentMethod: 'PayPal',\r\n        paymentStatus: 'pagado',      // CORREGIDO: de estado_pago a paymentStatus\r\n        transactionId: details.id,    // CORREGIDO: de paypalTransactionId a transactionId\r\n      };\r\n\r\n      try {\r\n        const response = await fetch('https://three-2cs3.onrender.com/api/reservations', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(reservationData),\r\n        });\r\n\r\n        if (!response.ok) throw new Error('El servidor no pudo guardar la reserva.');\r\n        \r\n        onPaymentSuccess(reservationData);\r\n\r\n      } catch (error) {\r\n        onPaymentError(error.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {isPending ? <p>Cargando...</p> : (\r\n        <PayPalButtons\r\n          createOrder={createOrder}\r\n          onApprove={onApprove}\r\n          onCancel={onPaymentCancel}\r\n          style={{ layout: \"vertical\" }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}