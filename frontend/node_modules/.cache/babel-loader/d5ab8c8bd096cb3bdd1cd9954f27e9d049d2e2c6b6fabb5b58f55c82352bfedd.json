{"ast":null,"code":"import _objectSpread from\"C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import rooms from'../data/rooms';import Calendar from'react-calendar';import PaypalButton from'../PaypalButton';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RoomDetails=()=>{const[paypalKey,setPaypalKey]=useState(0);const refreshPaypalButton=()=>{setPaypalKey(prevKey=>prevKey+1);};const confirmReservationRef=useRef(null);// Declarar el ref aquí\nconst{id}=useParams();const navigate=useNavigate();const room=rooms.find(room=>room.id===parseInt(id));const[selectedDate,setSelectedDate]=useState(null);// Fecha de ingreso\nconst[checkOut,setCheckOut]=useState(null);// Fecha de salida\nconst[isAvailable,setIsAvailable]=useState(false);// Disponibilidad de la habitación\nconst[selectedOption,setSelectedOption]=useState(1);// Número de personas\nconst[showForm,setShowForm]=useState(false);// Mostrar formulario de reserva\nconst[error,setError]=useState('');// Error si fechas coinciden\nconst[showCheckInCalendar,setShowCheckInCalendar]=useState(false);// Mostrar calendario de ingreso\nconst[showCheckOutCalendar,setShowCheckOutCalendar]=useState(false);// Mostrar calendario de salida\nuseEffect(()=>{if(!isAvailable||!selectedDate||!checkOut){setShowForm(false);}},[isAvailable,selectedDate,checkOut]);const checkInRef=useRef(null);const checkOutRef=useRef(null);const[formData,setFormData]=useState({clientName1:\"\",// Nombre completo de Persona 1\nclientName2:\"\",// Nombre completo de Persona 2 (opcional si hay 2 personas)\nclientEmail:\"\",// Correo electrónico (opcional)\nrutOrPassport:\"\",// RUT o número de pasaporte\nphone:\"\",nationality:\"\",address:\"\"});useEffect(()=>{const handleClickOutside=event=>{if(checkInRef.current&&!checkInRef.current.contains(event.target)){setShowCheckInCalendar(false);}if(checkOutRef.current&&!checkOutRef.current.contains(event.target)){setShowCheckOutCalendar(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[]);// Verificar disponibilidad conectando con el backend\nuseEffect(()=>{const checkAvailability=async()=>{if(selectedDate&&checkOut){if(selectedDate.toISOString().split(\"T\")[0]===checkOut.toISOString().split(\"T\")[0]){setError(\"La fecha de ingreso no puede ser igual a la de salida.\");setIsAvailable(false);return;}try{var _data$unavailableRoom;const response=await fetch(\"https://hostaljallalla2.onrender.com/api/reservations/check-availability\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({checkIn:selectedDate.toISOString().split(\"T\")[0],checkOut:checkOut.toISOString().split(\"T\")[0],roomId:room.id})});const data=await response.json();setError(\"\");// Limpiar errores si las fechas son válidas\nsetIsAvailable(!((_data$unavailableRoom=data.unavailableRooms)!==null&&_data$unavailableRoom!==void 0&&_data$unavailableRoom.includes(room.id)));}catch(error){console.error(\"Error al verificar disponibilidad:\",error);setIsAvailable(false);}}};checkAvailability();},[selectedDate,checkOut,room.id]);// Manejar cambios en el formulario\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};// Manejar la selección de fecha de ingreso\nconst handleCheckInChange=date=>{setSelectedDate(date);// Si la fecha de salida es anterior a la nueva fecha de ingreso o no existe\nif(!checkOut||date>=checkOut){const nextDay=new Date(date.getTime()+24*60*60*1000);// Sumar un día\nsetCheckOut(nextDay);// Seleccionar automáticamente la nueva fecha de salida\n}refreshPaypalButton();// Refresca el botón de PayPal\n};// Manejar la selección de fecha de salida\nconst handleCheckOutChange=date=>{setCheckOut(date);refreshPaypalButton();// Refresca el botón de PayPal\n};// Calcular cantidad de noches\nconst calculateNights=()=>{if(!selectedDate||!checkOut)return 0;return Math.ceil((checkOut-selectedDate)/(1000*60*60*24));};// Calcular precio total\nconst calculateTotalPrice=()=>{const nights=calculateNights();const pricePerNight=selectedOption===1?room.priceForOne:room.priceForTwo;return nights*pricePerNight;};// Enviar la reserva al backend\nconst handleConfirmReservation=async e=>{e.preventDefault();const reservationData={roomId:room.id,clientName:formData.clientName1,// Cambiado de clientName1 a clientName\nclientName2:selectedOption===2?formData.clientName2:undefined,// Solo agregar si selecciona 2 personas\nclientEmail:formData.clientEmail||undefined,// Opcional\nrutOrPassport:formData.rutOrPassport,// Obligatorio\nnumberOfGuests:selectedOption,checkIn:selectedDate===null||selectedDate===void 0?void 0:selectedDate.toISOString().split(\"T\")[0],checkOut:checkOut===null||checkOut===void 0?void 0:checkOut.toISOString().split(\"T\")[0],phone:formData.phone,nationality:formData.nationality,address:formData.address,nights:calculateNights(),// Nuevo campo: cantidad de noches calculadas\ntotalCost:calculateTotalPrice()// Nuevo campo: costo total calculado\n};console.log(\"Datos enviados al backend:\",reservationData);// Depuración\ntry{const response=await fetch(\"https://hostaljallalla2.onrender.com/api/reservations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(reservationData)});if(response.ok){// Redirigir a la página de éxito y pasar los datos de la reserva\nnavigate('/success',{state:{reservation:reservationData}});}else{const result=await response.json();alert(\"Error al realizar la reserva: \".concat(result.message));}}catch(error){console.error(\"Error al conectar con el servidor:\",error);alert(\"Hubo un error al conectar con el servidor.\");}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"30px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{display:'inline-block',// Se comporta como un botón\npadding:'10px 20px',// Espaciado interno\nfontSize:'16px',// Tamaño del texto\nfontWeight:'bold',// Texto en negrita\ncolor:'white',// Color del texto\nbackgroundColor:'#007bff',// Color de fondo azul\nborder:'2px solidrgb(255, 255, 255)',// Borde más oscuro\nborderRadius:'8px',// Bordes redondeados\ntextAlign:'center',// Centra el texto\ncursor:'default'// No muestra la mano como enlace\n},children:room.type}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",room.id]}),/*#__PURE__*/_jsx(\"img\",{src:room.image,alt:room.type,style:{width:\"80%\",maxWidth:\"220px\",borderRadius:\"8px\",marginBottom:\"20px\"}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Precio por noche: \",\" \",/*#__PURE__*/_jsx(\"strong\",{children:selectedOption===1?\"\".concat(room.priceForOne,\" CLP\"):\"\".concat(room.priceForTwo||room.priceForOne,\" CLP\")})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Personas: \",\" \",/*#__PURE__*/_jsxs(\"select\",{value:selectedOption,onChange:e=>{setSelectedOption(parseInt(e.target.value));refreshPaypalButton();// Refresca el botón de PayPal cuando se cambia el número de personas\n},style:{marginLeft:\"10px\",padding:\"5px\",fontSize:\"14px\",borderRadius:\"4px\",border:\"1px solid #ddd\"},children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1 Persona\"}),room.priceForTwo&&/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2 Personas\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"20px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),style:{padding:\"10px 20px\",backgroundColor:\"#007bff\",color:\"#fff\",border:\"none\",borderRadius:\"2px\",cursor:\"pointer\",fontSize:\"16px\",marginRight:\"10px\"},children:\"Volver\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!selectedDate||!checkOut||!isAvailable,onClick:()=>setShowForm(true),style:{padding:\"12px 20px\",backgroundColor:!selectedDate||!checkOut||!isAvailable?\"#ccc\":\"#28a745\",color:!selectedDate||!checkOut||!isAvailable?\"#666\":\"#fff\",border:\"none\",borderRadius:\"20px\",cursor:!selectedDate||!checkOut||!isAvailable?\"not-allowed\":\"pointer\",fontSize:\"16px\"},children:\"Reservar\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Selecciona tus fechas\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"20px\"},children:/*#__PURE__*/_jsxs(\"div\",{ref:checkInRef,style:{border:\"1px solid #ccc\",padding:\"10px\",borderRadius:\"4px\",cursor:\"pointer\",backgroundColor:\"#f9f9f9\",position:\"relative\"},onClick:()=>setShowCheckInCalendar(prev=>!prev),children:[selectedDate?selectedDate.toLocaleDateString(\"es-ES\"):\"Selecciona fecha de ingreso\",showCheckInCalendar&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",zIndex:10},children:/*#__PURE__*/_jsx(Calendar,{onChange:date=>{handleCheckInChange(date);setShowCheckInCalendar(false);},value:selectedDate,locale:\"es-ES\",minDate:new Date()})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"20px\"},children:/*#__PURE__*/_jsxs(\"div\",{ref:checkOutRef,style:{border:\"1px solid #ccc\",padding:\"10px\",borderRadius:\"4px\",cursor:\"pointer\",backgroundColor:\"#f9f9f9\",position:\"relative\"},onClick:()=>setShowCheckOutCalendar(prev=>!prev),children:[checkOut?checkOut.toLocaleDateString(\"es-ES\"):\"Selecciona fecha de salida\",showCheckOutCalendar&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",zIndex:10},children:/*#__PURE__*/_jsx(Calendar,{onChange:date=>{handleCheckOutChange(date);setShowCheckOutCalendar(false);},value:checkOut,locale:\"es-ES\",minDate:selectedDate?new Date(selectedDate.getTime()+24*60*60*1000):new Date()})})]})}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",fontWeight:\"bold\"},children:error}),selectedDate&&checkOut&&!error&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:\"20px\",// Ajustado para la sección correcta\nfontSize:\"18px\",fontWeight:\"bold\",color:isAvailable?\"#28a745\":\"#dc3545\",// Verde o rojo según estado\ntextAlign:\"center\"},children:isAvailable?\"¡Disponible!\":\"No disponible\"})]}),showForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleConfirmReservation,style:{marginTop:\"20px\",// Ajustado\ntextAlign:\"left\",maxWidth:\"600px\",margin:\"20px auto\",// Centra el formulario horizontalmente\npadding:\"20px\",// Espaciado interno opcional\nbackgroundColor:\"#f9f9f9\",// Opcional: color de fondo para destacar el formulario\nborderRadius:\"8px\",// Bordes redondeados\nboxShadow:\"0 2px 4px rgba(0, 0, 0, 0.1)\"// Sombra ligera opcional\n},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Formulario de Reserva\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Nombre completo:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"clientName1\",value:formData.clientName1,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}}),selectedOption===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre completo (Persona 2):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"clientName2\",value:formData.clientName2,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"RUT o n\\xFAmero de pasaporte:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rutOrPassport\",value:formData.rutOrPassport,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(\"label\",{children:\"Correo electr\\xF3nico (opcional):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"clientEmail\",value:formData.clientEmail,onChange:handleInputChange,style:{width:\"100%\",marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(\"label\",{children:\"Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",value:formData.phone,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(\"label\",{children:\"Nacionalidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nationality\",value:formData.nationality,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(\"label\",{children:\"Direcci\\xF3n:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:formData.address,onChange:handleInputChange,required:true,style:{width:\"100%\",marginBottom:\"10px\"}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cantidad de noches: \",/*#__PURE__*/_jsx(\"strong\",{children:calculateNights()})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Precio total: \",/*#__PURE__*/_jsxs(\"strong\",{children:[calculateTotalPrice(),\" CLP\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total a pagar: \",calculateTotalPrice(),\" CLP\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsx(PaypalButton,{amount:calculateTotalPrice()// Total a pagar\n,// Reinicia el botón al cambiar paypalKey\nonPaymentSuccess:()=>{// Simular clic en el botón de Confirmar Reserva\nif(confirmReservationRef.current){confirmReservationRef.current.click();}},onPaymentError:error=>{alert(\"Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.\");console.error(\"Error en el pago:\",error);},onPaymentCancel:()=>{alert(\"El pago fue cancelado por el usuario.\");}},paypalKey),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'20px',fontWeight:'bold'},children:\"Tambi\\xE9n puedes confirmar tu reserva sin realizar un pago en l\\xEDnea.\"}),/*#__PURE__*/_jsx(\"button\",{ref:confirmReservationRef// Vincula el botón al ref\n,className:\"confirm-reservation-btn\",onClick:handleConfirmReservation,style:{marginTop:'10px',backgroundColor:'#007BFF',color:'#fff',border:'none',padding:'10px 20px',borderRadius:'5px',cursor:'pointer'},children:\"Confirmar Reserva\"})]})]})]})]});};export default RoomDetails;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","rooms","Calendar","PaypalButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RoomDetails","paypalKey","setPaypalKey","refreshPaypalButton","prevKey","confirmReservationRef","id","navigate","room","find","parseInt","selectedDate","setSelectedDate","checkOut","setCheckOut","isAvailable","setIsAvailable","selectedOption","setSelectedOption","showForm","setShowForm","error","setError","showCheckInCalendar","setShowCheckInCalendar","showCheckOutCalendar","setShowCheckOutCalendar","checkInRef","checkOutRef","formData","setFormData","clientName1","clientName2","clientEmail","rutOrPassport","phone","nationality","address","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","checkAvailability","toISOString","split","_data$unavailableRoom","response","fetch","method","headers","body","JSON","stringify","checkIn","roomId","data","json","unavailableRooms","includes","console","handleInputChange","e","name","value","prev","_objectSpread","handleCheckInChange","date","nextDay","Date","getTime","handleCheckOutChange","calculateNights","Math","ceil","calculateTotalPrice","nights","pricePerNight","priceForOne","priceForTwo","handleConfirmReservation","preventDefault","reservationData","clientName","undefined","numberOfGuests","totalCost","log","ok","state","reservation","result","alert","concat","message","style","padding","textAlign","children","display","fontSize","fontWeight","color","backgroundColor","border","borderRadius","cursor","type","src","image","alt","width","maxWidth","marginBottom","onChange","marginLeft","onClick","marginRight","disabled","marginTop","ref","position","toLocaleDateString","zIndex","locale","minDate","onSubmit","margin","boxShadow","required","className","amount","onPaymentSuccess","click","onPaymentError","onPaymentCancel"],"sources":["C:/Users/Jonathan/Desktop/Proyecto Hostal/frontend/src/pages/RoomDetails.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport rooms from '../data/rooms';\r\nimport Calendar from 'react-calendar';\r\nimport PaypalButton from '../PaypalButton';\r\n\r\n\r\nconst RoomDetails = () => {\r\n\r\n\r\n\r\n    const [paypalKey, setPaypalKey] = useState(0);\r\n\r\nconst refreshPaypalButton = () => {\r\n    setPaypalKey((prevKey) => prevKey + 1);\r\n};\r\n\r\n    const confirmReservationRef = useRef(null); // Declarar el ref aquí\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const room = rooms.find((room) => room.id === parseInt(id));\r\n\r\n    const [selectedDate, setSelectedDate] = useState(null); // Fecha de ingreso\r\n    const [checkOut, setCheckOut] = useState(null); // Fecha de salida\r\n    const [isAvailable, setIsAvailable] = useState(false); // Disponibilidad de la habitación\r\n    const [selectedOption, setSelectedOption] = useState(1); // Número de personas\r\n    const [showForm, setShowForm] = useState(false); // Mostrar formulario de reserva\r\n    const [error, setError] = useState(''); // Error si fechas coinciden\r\n\r\n    const [showCheckInCalendar, setShowCheckInCalendar] = useState(false); // Mostrar calendario de ingreso\r\n    const [showCheckOutCalendar, setShowCheckOutCalendar] = useState(false); // Mostrar calendario de salida\r\n\r\n    useEffect(() => {\r\n        if (!isAvailable || !selectedDate || !checkOut) {\r\n            setShowForm(false);\r\n        }\r\n    }, [isAvailable, selectedDate, checkOut]);\r\n    \r\n\r\n    const checkInRef = useRef(null);\r\n    const checkOutRef = useRef(null);\r\n\r\n    const [formData, setFormData] = useState({\r\n        clientName1: \"\", // Nombre completo de Persona 1\r\n        clientName2: \"\", // Nombre completo de Persona 2 (opcional si hay 2 personas)\r\n        clientEmail: \"\", // Correo electrónico (opcional)\r\n        rutOrPassport: \"\", // RUT o número de pasaporte\r\n        phone: \"\",\r\n        nationality: \"\",\r\n        address: \"\",\r\n    });\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (checkInRef.current && !checkInRef.current.contains(event.target)) {\r\n                setShowCheckInCalendar(false);\r\n            }\r\n            if (checkOutRef.current && !checkOutRef.current.contains(event.target)) {\r\n                setShowCheckOutCalendar(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    // Verificar disponibilidad conectando con el backend\r\n    useEffect(() => {\r\n        const checkAvailability = async () => {\r\n            if (selectedDate && checkOut) {\r\n                if (selectedDate.toISOString().split(\"T\")[0] === checkOut.toISOString().split(\"T\")[0]) {\r\n                    setError(\"La fecha de ingreso no puede ser igual a la de salida.\");\r\n                    setIsAvailable(false);\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const response = await fetch(\"https://hostaljallalla2.onrender.com/api/reservations/check-availability\", {\r\n                        method: \"POST\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({\r\n                            checkIn: selectedDate.toISOString().split(\"T\")[0],\r\n                            checkOut: checkOut.toISOString().split(\"T\")[0],\r\n                            roomId: room.id,\r\n                        }),\r\n                    });\r\n\r\n                    const data = await response.json();\r\n                    setError(\"\"); // Limpiar errores si las fechas son válidas\r\n                    setIsAvailable(!data.unavailableRooms?.includes(room.id));\r\n                } catch (error) {\r\n                    console.error(\"Error al verificar disponibilidad:\", error);\r\n                    setIsAvailable(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        checkAvailability();\r\n    }, [selectedDate, checkOut, room.id]);\r\n\r\n    // Manejar cambios en el formulario\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    // Manejar la selección de fecha de ingreso\r\n    const handleCheckInChange = (date) => {\r\n        setSelectedDate(date);\r\n\r\n        // Si la fecha de salida es anterior a la nueva fecha de ingreso o no existe\r\n        if (!checkOut || date >= checkOut) {\r\n            const nextDay = new Date(date.getTime() + 24 * 60 * 60 * 1000); // Sumar un día\r\n            setCheckOut(nextDay); // Seleccionar automáticamente la nueva fecha de salida\r\n        }\r\n        refreshPaypalButton(); // Refresca el botón de PayPal\r\n    };\r\n\r\n    // Manejar la selección de fecha de salida\r\n    const handleCheckOutChange = (date) => {\r\n        setCheckOut(date);\r\n        refreshPaypalButton(); // Refresca el botón de PayPal\r\n    };\r\n\r\n    // Calcular cantidad de noches\r\n    const calculateNights = () => {\r\n        if (!selectedDate || !checkOut) return 0;\r\n        return Math.ceil((checkOut - selectedDate) / (1000 * 60 * 60 * 24));\r\n    };\r\n\r\n    // Calcular precio total\r\n    const calculateTotalPrice = () => {\r\n        const nights = calculateNights();\r\n        const pricePerNight = selectedOption === 1 ? room.priceForOne : room.priceForTwo;\r\n        return nights * pricePerNight;\r\n    };\r\n\r\n    // Enviar la reserva al backend\r\n\r\n\r\n    const handleConfirmReservation = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const reservationData = {\r\n            roomId: room.id,\r\n            clientName: formData.clientName1, // Cambiado de clientName1 a clientName\r\n            clientName2: selectedOption === 2 ? formData.clientName2 : undefined, // Solo agregar si selecciona 2 personas\r\n            clientEmail: formData.clientEmail || undefined, // Opcional\r\n            rutOrPassport: formData.rutOrPassport, // Obligatorio\r\n            numberOfGuests: selectedOption,\r\n            checkIn: selectedDate?.toISOString().split(\"T\")[0],\r\n            checkOut: checkOut?.toISOString().split(\"T\")[0],\r\n            phone: formData.phone,\r\n            nationality: formData.nationality,\r\n            address: formData.address,\r\n            nights: calculateNights(), // Nuevo campo: cantidad de noches calculadas\r\n            totalCost: calculateTotalPrice(), // Nuevo campo: costo total calculado\r\n        };\r\n\r\n        console.log(\"Datos enviados al backend:\", reservationData); // Depuración\r\n\r\n        try {\r\n            const response = await fetch(\"https://hostaljallalla2.onrender.com/api/reservations\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(reservationData),\r\n            });\r\n\r\n            if (response.ok) {\r\n                // Redirigir a la página de éxito y pasar los datos de la reserva\r\n                navigate('/success', { state: { reservation: reservationData } });\r\n            } else {\r\n                const result = await response.json();\r\n                alert(`Error al realizar la reserva: ${result.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error al conectar con el servidor:\", error);\r\n            alert(\"Hubo un error al conectar con el servidor.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: \"30px\", textAlign: \"center\" }}>\r\n            <h1\r\n                style={{\r\n                    display: 'inline-block', // Se comporta como un botón\r\n                    padding: '10px 20px', // Espaciado interno\r\n                    fontSize: '16px', // Tamaño del texto\r\n                    fontWeight: 'bold', // Texto en negrita\r\n                    color: 'white', // Color del texto\r\n                    backgroundColor: '#007bff', // Color de fondo azul\r\n                    border: '2px solidrgb(255, 255, 255)', // Borde más oscuro\r\n                    borderRadius: '8px', // Bordes redondeados\r\n                    textAlign: 'center', // Centra el texto\r\n                    cursor: 'default', // No muestra la mano como enlace\r\n                }}\r\n            >\r\n                {room.type}\r\n            </h1>\r\n            <p><strong>ID:</strong> {room.id}</p>\r\n            <img\r\n                src={room.image}\r\n                alt={room.type}\r\n                style={{\r\n                    width: \"80%\",\r\n                    maxWidth: \"220px\",\r\n                    borderRadius: \"8px\",\r\n                    marginBottom: \"20px\",\r\n                }}\r\n            />\r\n\r\n            <p>\r\n                Precio por noche: {\" \"}\r\n                <strong>\r\n                    {selectedOption === 1\r\n                        ? `${room.priceForOne} CLP`\r\n                        : `${room.priceForTwo || room.priceForOne} CLP`}\r\n                </strong>\r\n            </p>\r\n            <label>\r\n                Personas: {\" \"}\r\n                <select\r\n    value={selectedOption}\r\n    onChange={(e) => {\r\n        setSelectedOption(parseInt(e.target.value));\r\n        refreshPaypalButton(); // Refresca el botón de PayPal cuando se cambia el número de personas\r\n    }}\r\n    style={{\r\n        marginLeft: \"10px\",\r\n        padding: \"5px\",\r\n        fontSize: \"14px\",\r\n        borderRadius: \"4px\",\r\n        border: \"1px solid #ddd\",\r\n    }}\r\n>\r\n    <option value={1}>1 Persona</option>\r\n    {room.priceForTwo && <option value={2}>2 Personas</option>}\r\n</select>\r\n\r\n            </label>\r\n            <div style={{ marginBottom: \"20px\" }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        padding: \"10px 20px\",\r\n                        backgroundColor: \"#007bff\",\r\n                        color: \"#fff\",\r\n                        border: \"none\",\r\n                        borderRadius: \"2px\",\r\n                        cursor: \"pointer\",\r\n                        fontSize: \"16px\",\r\n                        marginRight: \"10px\",\r\n                    }}\r\n                >\r\n                    Volver\r\n                </button>\r\n                <button\r\n                    disabled={!selectedDate || !checkOut || !isAvailable}\r\n                    onClick={() => setShowForm(true)}\r\n                    style={{\r\n                        padding: \"12px 20px\",\r\n                        backgroundColor: !selectedDate || !checkOut || !isAvailable ? \"#ccc\" : \"#28a745\",\r\n                        color: !selectedDate || !checkOut || !isAvailable ? \"#666\" : \"#fff\",\r\n                        border: \"none\",\r\n                        borderRadius: \"20px\",\r\n                        cursor: !selectedDate || !checkOut || !isAvailable ? \"not-allowed\" : \"pointer\",\r\n                        fontSize: \"16px\",\r\n                    }}\r\n                >\r\n                    Reservar\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ marginTop: \"20px\" }}>\r\n                <h2>Selecciona tus fechas</h2>\r\n\r\n                {/* Fecha de ingreso */}\r\n                <div style={{ marginBottom: \"20px\" }}>\r\n                \r\n                    <div\r\n                        ref={checkInRef}\r\n                        style={{\r\n                            border: \"1px solid #ccc\",\r\n                            padding: \"10px\",\r\n                            borderRadius: \"4px\",\r\n                            cursor: \"pointer\",\r\n                            backgroundColor: \"#f9f9f9\",\r\n                            position: \"relative\",\r\n                        }}\r\n                        onClick={() => setShowCheckInCalendar((prev) => !prev)}\r\n                    >\r\n                        {selectedDate ? selectedDate.toLocaleDateString(\"es-ES\") : \"Selecciona fecha de ingreso\"}\r\n\r\n                        {showCheckInCalendar && (\r\n                            <div style={{ position: \"absolute\", zIndex: 10 }}>\r\n                                <Calendar\r\n                                    onChange={(date) => {\r\n                                        handleCheckInChange(date);\r\n                                        setShowCheckInCalendar(false);\r\n                                    }}\r\n                                    value={selectedDate}\r\n                                    locale=\"es-ES\"\r\n                                    minDate={new Date()}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Fecha de salida */}\r\n                <div style={{ marginBottom: \"20px\" }}>\r\n\r\n                    <div\r\n                        ref={checkOutRef}\r\n                        style={{\r\n                            border: \"1px solid #ccc\",\r\n                            padding: \"10px\",\r\n                            borderRadius: \"4px\",\r\n                            cursor: \"pointer\",\r\n                            backgroundColor: \"#f9f9f9\",\r\n                            position: \"relative\",\r\n                        }}\r\n                        onClick={() => setShowCheckOutCalendar((prev) => !prev)}\r\n                    >\r\n                        {checkOut ? checkOut.toLocaleDateString(\"es-ES\") : \"Selecciona fecha de salida\"}\r\n\r\n                        {showCheckOutCalendar && (\r\n                            <div style={{ position: \"absolute\", zIndex: 10 }}>\r\n                                <Calendar\r\n                                    onChange={(date) => {\r\n                                        handleCheckOutChange(date);\r\n                                        setShowCheckOutCalendar(false);\r\n                                    }}\r\n                                    value={checkOut}\r\n                                    locale=\"es-ES\"\r\n                                    minDate={\r\n                                        selectedDate\r\n                                            ? new Date(selectedDate.getTime() + 24 * 60 * 60 * 1000)\r\n                                            : new Date()\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {error && <p style={{ color: \"red\", fontWeight: \"bold\" }}>{error}</p>}\r\n\r\n                {selectedDate && checkOut && !error && (\r\n                    <p\r\n                        style={{\r\n                            marginTop: \"20px\", // Ajustado para la sección correcta\r\n                            fontSize: \"18px\",\r\n                            fontWeight: \"bold\",\r\n                            color: isAvailable ? \"#28a745\" : \"#dc3545\", // Verde o rojo según estado\r\n                            textAlign: \"center\",\r\n                        }}\r\n                    >\r\n                        {isAvailable ? \"¡Disponible!\" : \"No disponible\"}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {showForm && (\r\n                <form\r\n                    onSubmit={handleConfirmReservation}\r\n                    style={{\r\n                        marginTop: \"20px\", // Ajustado\r\n                        textAlign: \"left\",\r\n                        maxWidth: \"600px\",\r\n                        margin: \"20px auto\", // Centra el formulario horizontalmente\r\n                        padding: \"20px\", // Espaciado interno opcional\r\n                        backgroundColor: \"#f9f9f9\", // Opcional: color de fondo para destacar el formulario\r\n                        borderRadius: \"8px\", // Bordes redondeados\r\n                        boxShadow: \"0 2px 4px rgba(0, 0, 0, 0.1)\", // Sombra ligera opcional\r\n                    }}\r\n                >\r\n                    <h3>Formulario de Reserva</h3>\r\n                    <label>Nombre completo:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"clientName1\"\r\n                        value={formData.clientName1}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    {selectedOption === 2 && (\r\n                        <>\r\n                            <label>Nombre completo (Persona 2):</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"clientName2\"\r\n                                value={formData.clientName2}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                                style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    <label>RUT o número de pasaporte:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"rutOrPassport\"\r\n                        value={formData.rutOrPassport}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    <label>Correo electrónico (opcional):</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        name=\"clientEmail\"\r\n                        value={formData.clientEmail}\r\n                        onChange={handleInputChange}\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    <label>Teléfono:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"phone\"\r\n                        value={formData.phone}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    <label>Nacionalidad:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"nationality\"\r\n                        value={formData.nationality}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    <label>Dirección:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"address\"\r\n                        value={formData.address}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        style={{ width: \"100%\", marginBottom: \"10px\" }}\r\n                    />\r\n\r\n                    <p>\r\n                        Cantidad de noches: <strong>{calculateNights()}</strong>\r\n                    </p>\r\n                    <p>\r\n                        Precio total: <strong>{calculateTotalPrice()} CLP</strong>\r\n                    </p>\r\n                    <div>\r\n    <h3>Total a pagar: {calculateTotalPrice()} CLP</h3>\r\n\r\n    \r\n    <div className=\"payment-section\">\r\n    {/* Botón de PayPal */}\r\n    <PaypalButton\r\n    amount={calculateTotalPrice()} // Total a pagar\r\n    key={paypalKey} // Reinicia el botón al cambiar paypalKey\r\n    onPaymentSuccess={() => {\r\n        // Simular clic en el botón de Confirmar Reserva\r\n        if (confirmReservationRef.current) {\r\n            confirmReservationRef.current.click();\r\n        }\r\n    }}\r\n    onPaymentError={(error) => {\r\n        alert(\"Hubo un error al procesar el pago. Por favor, inténtalo nuevamente.\");\r\n        console.error(\"Error en el pago:\", error);\r\n    }}\r\n    onPaymentCancel={() => {\r\n        alert(\"El pago fue cancelado por el usuario.\");\r\n    }}\r\n    />\r\n\r\n    {/* Texto personalizado antes del botón de confirmar reserva */}\r\n    <p style={{ marginTop: '20px', fontWeight: 'bold' }}>\r\n        {/** Reemplaza este texto con el que desees **/}\r\n        También puedes confirmar tu reserva sin realizar un pago en línea.\r\n    </p>\r\n\r\n    {/* Botón de confirmar reserva */}\r\n    <button\r\n    ref={confirmReservationRef} // Vincula el botón al ref\r\n    className=\"confirm-reservation-btn\"\r\n    onClick={handleConfirmReservation}\r\n    style={{\r\n        marginTop: '10px',\r\n        backgroundColor: '#007BFF',\r\n        color: '#fff',\r\n        border: 'none',\r\n        padding: '10px 20px',\r\n        borderRadius: '5px',\r\n        cursor: 'pointer',\r\n    }}\r\n>\r\n    Confirmar Reserva\r\n</button>\r\n</div>\r\n\r\n</div>\r\n\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RoomDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}